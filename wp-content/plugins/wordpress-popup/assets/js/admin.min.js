!function(e){"use strict";window.Hustle=function(e,t,i){var s={},n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g},a=_.extend({},Backbone.Events),o=Backbone.View.extend({initialize:function(){_.isFunction(this.initMix)&&this.initMix.apply(this,arguments),this.render&&(this.render=_.wrap(this.render,function(e){this.trigger("before_render"),e.call(this),a.trigger("view.rendered",this),this.trigger("rendered")})),_.isFunction(this.init)&&this.init.apply(this,arguments)}}),l=_.memoize(function(e){var t;return function(i){return(t=t||_.template(document.getElementById(e).innerHTML,null,n))(i).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),r=_.memoize(function(e){var t;return function(i){return(t=t||_.template(e,null,n))(i)}});return{define:function(n,a){if(n.split(".").length)!function s(n,o){var l,r=n.split("."),d=r.splice(0,1)[0];d&&(r.length?o[d]=o[d]||{}:(l=a.call(null,e,t,i),o[d]=_.isFunction(l)||void 0===l?l:_.extend(o[d]||{},l)),r.length&&d&&s(r.join("."),o[d]))}(n,s);else{var o=s[n]||{};s[n]=_.extend(o,a.call(null,e,t,i))}},getModules:function(){return s},get:function(e){var t,i;return e.split(".").length?(t=!1,(i=function(e,s){var n=e.split("."),a=n.splice(0,1)[0];t=s[a],n.length&&i(n.join("."),s[a])})(e,s),t):s[e]||!1},Events:a,View:o,template:l,createTemplate:r,getTemplateOptions:function(){return e.extend(!0,{},n)},cookie:{set:function(t,i,s){var n,a;i=e.isArray(i)||e.isPlainObject(i)?JSON.stringify(i):i,isNaN(s)?a="":((n=new Date).setTime(n.getTime()+24*s*60*60*1e3),a="; expires="+n.toGMTString()),document.cookie=t+"="+i+a+"; path=/"},get:function(e){var t,i,s,n=document.cookie.split(";"),a=n.length;for(s=e+"=",t=0;t<a;t+=1){for(i=n[t];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(s)){var o=i.substring(s.length,i.length);return o?JSON.parse(o):o}}return null}},consts:{ModuleShowCount:"hustle_module_show_count-"}}}(jQuery,document,window)}(jQuery);var Optin=Optin||{};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Optin.View={},Optin.Models={},Optin.Events={},"undefined"!=typeof Backbone&&_.extend(Optin.Events,Backbone.Events),function(e){"use strict";Optin.NEVER_SEE_PREFIX="inc_optin_never_see_again-",Optin.COOKIE_PREFIX="inc_optin_long_hidden-",Optin.POPUP_COOKIE_PREFIX="inc_optin_popup_long_hidden-",Optin.SLIDE_IN_COOKIE_PREFIX="inc_optin_slide_in_long_hidden-",Optin.EMBEDDED_COOKIE_PREFIX="inc_optin_embedded_long_hidden-",Optin.globalMixin=function(){_.mixin({log:function(){},toBool:function(e){return _.isBoolean(e)?e:_.isString(e)&&-1!==["true","false","1"].indexOf(e.toLowerCase())?"true"===e.toLowerCase()||"1"===e.toLowerCase():_.isNumber(e)?!!e:!(_.isUndefined(e)||_.isNull(e)||_.isNaN(e))&&e},isTrue:function(e){return!(_.isUndefined(e)||_.isNull(e)||_.isNaN(e))&&(_.isNumber(e)?0!==e:(e=e.toString().toLowerCase(),-1!==["1","true","on"].indexOf(e)))},isFalse:function(e){return!_.isTrue(e)},controlBase:function(e,t,i){return i=_.isUndefined(i)?"checked":i,e=_.toBool(e),t=_.isBoolean(e)?_.isTrue(t):t,_.isEqual(e,t)?i+"="+i:""},checked:function(e,t){return _.controlBase(e,t,"checked")},selected:function(e,t){return _.controlBase(e,t,"selected")},disabled:function(e,t){return _.controlBase(e,t,"disabled")},class:function(e,t,i){return _.isTrue(e)?t:void 0!==i?i:""},add_class:function(e,t,i){return"class={class}".replace("{class}",_.class(e,t,i))},toUpperCase:function(e){return _.isString(e)?e.toUpperCase():""}}),_.findKey||_.mixin({findKey:function(e,t,i){t=cb(t,i);for(var s,n=_.keys(e),a=0,o=n.length;a<o;a++)if(t(e[s=n[a]],s,e))return s}})},Optin.globalMixin(),Backbone.Model.prototype.toJSON=function(){var e,t=_.clone(this.attributes);for(e in t)(t[e]instanceof Backbone.Model||Backbone.Collection&&t[e]instanceof Backbone.Collection)&&(t[e]=t[e].toJSON());return t},Optin.template=_.memoize(function(t){var i,s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(n){return(i=i||_.template(e("#"+t).html(),null,s))(n).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.templateCompat=_.memoize(function(t){var i;return function(s){return(i=i||_.template(e("#"+t).html()))(s).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.cookie=Hustle.cookie,Optin.Mixins={_mixins:{},_servicesMixins:{},_desingMixins:{},_displayMixins:{},add:function(e,t){this._mixins[e]=t},getMixins:function(){return this._mixins},addServicesMixin:function(e,t){this._servicesMixins[e]=t},getServicesMixins:function(){return this._servicesMixins}}}(jQuery),function(e){"use strict";Hustle.Events.on("view.rendered",function(t){t instanceof Backbone.View&&(t.$("select:not([multiple])").each(function(){SUI.suiSelect(this)}),t.$(".sui-select:not(.hustle-select-ajax)").SUIselect2({dropdownCssClass:"sui-select-dropdown"}),t.$(".sui-accordion").each(function(){SUI.suiAccordion(this)}),SUI.suiTabs(),SUI.tabs(),SUI.floatInput(),t.$(".sui-side-tabs label.sui-tab-item input").each(function(){var t=e(this),i=t.parent("label"),s=t.data("tab-menu"),n=t.closest(".sui-side-tabs"),a=n.find(">.sui-tabs-menu .sui-tab-item"),o=a.find("input");t.on("click",function(e){a.removeClass("active"),o.removeAttr("checked"),n.find(">.sui-tabs-content>div[data-tab-content]").removeClass("active"),i.addClass("active"),t.attr("checked","checked");var l=n.find('.sui-tabs-content div[data-tab-content="'+s+'"]');l.length&&l.addClass("active")})}),t.$(".sui-toggle.hustle-toggle-with-container").each(function(){var t=e(this),i=t.find("input[type=checkbox]"),s=e('[data-toggle-content="'.concat(t.data("toggle-on"),'"]')),n=e('[data-toggle-content="'.concat(t.data("toggle-off"),'"]')),a=function(){i[0].checked?(Module.Utils.accessibleShow(s),Module.Utils.accessibleHide(n)):(Module.Utils.accessibleShow(n),Module.Utils.accessibleHide(s))};a(),i.on("change",function(){return a()})}),t.$("select.hustle-select-with-container").each(function(){var t=e(this),i=e('[data-field-content="'.concat(this.name,'"]')),s=t.data("content-on").split(","),n=function(){s.includes(t.val())?Module.Utils.accessibleShow(i):Module.Utils.accessibleHide(i)};n(),t.on("change",function(){return n()})}))}),e(document).ready(function(){e("#hustle-email-day").length&&e("#hustle-email-day").datepicker({beforeShow:function(t,i){e("#ui-datepicker-div").addClass("sui-calendar")},dateFormat:"MM dd, yy"}),e("#hustle-email-time").length&&e("#hustle-email-time").timepicker({timeFormat:"h:mm p",interval:"1",minTime:"0",maxTime:"11:59pm",defaultTime:null,startTime:"00:00",dynamic:!1,dropdown:!0,scrollbar:!0,change:function(){e("#hustle-email-time").trigger("change")}}),e("#hustle-notice-pro-is-available .notice-dismiss").on("click",function(t){e.post(ajaxurl,{action:"hustle_dismiss_admin_notice",dismissedNotice:"hustle_pro_is_available"},function(e){})}),e(".hustle-copy-shortcode-button").on("click",function(t){t.preventDefault();var i=e(t.target),s=i.data("shortcode"),n=i.closest(".sui-with-button-inside");if(void 0!==s){var a=e("<input />");e("body").append(a),a.val(s).select(),document.execCommand("copy"),a.remove(),Module.Notification.open("success",optinVars.messages.commons.shortcode_copied)}else if(n.length){n.find('input[type="text"]').select(),document.execCommand("copy")}}),e("#hustle-tracking-migration-notice .hustle-notice-dismiss").on("click",function(t){t.preventDefault(),e("#hustle-dismiss-modal-button").on("click",function(t){t.preventDefault(),e.post(ajaxurl,{action:"hustle_dismiss_notification",name:e(t.currentTarget).data("name"),_ajax_nonce:e(t.currentTarget).data("nonce")}).always(function(){return location.reload()})}),SUI.dialogs["hustle-dialog--migrate-dismiss-confirmation"].show()}),e("#hustle-sendgrid-update-notice .notice-dismiss").on("click",function(t){t.preventDefault();var i=e(t.currentTarget).closest("#hustle-sendgrid-update-notice");e.post(ajaxurl,{action:"hustle_dismiss_notification",name:i.data("name"),_ajax_nonce:i.data("nonce")})}),e(".hustle-notice .notice-dismiss, .hustle-notice .dismiss-notice").on("click",function(t){t.preventDefault();var i=e(t.currentTarget).closest(".hustle-notice");e.post(ajaxurl,{action:"hustle_dismiss_notification",name:i.data("name"),_ajax_nonce:i.data("nonce")}).always(function(){return location.reload()})}),e(".sui-form-field input[type=number]").length&&e(".sui-form-field input[type=number]").on("keydown",function(t){e(this)[0].hasAttribute("min")&&0<=e(this).attr("min")&&(0!==t.originalEvent.key.replace(/[^0-9^.^,]/,"").length||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.preventDefault())}),setTimeout(function(){e(".hustle-scroll-to").length&&e("html, body").animate({scrollTop:e(".hustle-scroll-to").offset().top},"slow")},100),e(".hustle-check-all").on("click",function(t){var i=e(t.target),s=i.parents(".sui-wrap").find(".hustle-list"),n=i.is(":checked");s.find(".hustle-listing-checkbox").prop("checked",n),e(".hustle-bulk-apply-button").prop("disabled",!n)}),e(".hustle-list .hustle-listing-checkbox").on("click",function(t){var i=e(t.target),s=i.parents(".sui-wrap").find(".hustle-list"),n=i.is(":checked")&&!s.find(".hustle-listing-checkbox:not(:checked)").length,a=0===s.find(".hustle-listing-checkbox:checked").length;e("#hustle-check-all").prop("checked",n),e(".hustle-bulk-apply-button").prop("disabled",a)}),e(".hustle-bulk-apply-button").on("click",function(t){var i=e(t.target),s=e("select option:selected",i.closest(".hui-bulk-actions")).val(),n=e(".hustle-list .hustle-listing-checkbox:checked");if(0===n.length||"undefined"===s)return!1;var a=[];if(e.each(n,function(){a.push(e(this).val())}),"delete-all"===s){var o={ids:a.join(","),nonce:i.siblings("#hustle_nonce").val(),title:i.data("title"),description:i.data("description"),action:s};return Module.deleteModal.open(o),!1}})})}(jQuery),Hustle.define("Modals.Migration",function(e){"use strict";new(Backbone.View.extend({el:"#hustle-dialog--migrate",data:{},events:{"click #hustle-migrate-start":"migrateStart","click #hustle-create-new-module":"createModule","click .sui-box-selector":"enableContinue","click .hustle-dialog-migrate-skip":"dismissModal","click .sui-dialog-overlay":"dismissModal"},initialize:function(){if(this.$el.length){var t="",i="";0===this.$el.data("isFirst")?(t="#hustle-dialog--migrate-slide-2",i="hustle-migrate-start"):(t="#hustle-dialog--migrate-slide-1",i="hustle-migrate-get-started"),this.$(t).addClass("sui-active sui-loaded"),setTimeout(function(){return SUI.openModal("hustle-dialog--migrate",i,e(".sui-wrap")[0],!1)},100),this.$progressBar=this.$el.find(".sui-progress .sui-progress-bar span"),this.$progressText=this.$el.find(".sui-progress .sui-progress-text span"),this.$partialRows=this.$el.find("#hustle-partial-rows")}},migrateStart:function(t){var i=e(t.target),s=this.$el.find("#hustle-dialog--migrate-slide-2"),n=s.find("#migrateDialog2Description");i.addClass("sui-button-onload"),s.find(".hustle-dialog-migrate-skip").remove(),n.text(n.data("migrate-text")),Module.Utils.accessibleHide(s.find("div[data-migrate-start]")),Module.Utils.accessibleHide(s.find("div[data-migrate-failed]")),Module.Utils.accessibleShow(s.find("div[data-migrate-progress]")),this.migrateTracking(t),i.removeClass("sui-button-onload"),t.preventDefault()},migrateComplete:function(){var e=this.$("#hustle-dialog--migrate-slide-2"),t=this,i=e.find("#migrateDialog2Title"),s=e.find("#migrateDialog2Description");this.$el.find("sui-button-onload").removeClass("sui-button-onload"),i.text(i.data("done-text")),s.text(s.data("done-text")),Module.Utils.accessibleHide(e.find("div[data-migrate-progress]")),Module.Utils.accessibleShow(e.find("div[data-migrate-done]")),this.$el.closest(".sui-modal").on("click",function(e){return t.closeDialog(e)})},migrateFailed:function(){var e=this.$el.find("#hustle-dialog--migrate-slide-2");e.find("#dialogDescription").text(""),Module.Utils.accessibleHide(e.find("div[data-migrate-start]")),Module.Utils.accessibleShow(e.find("div[data-migrate-failed]")),Module.Utils.accessibleHide(e.find("div[data-migrate-progress]"))},updateProgress:function(e,t,i){void 0===this.totalRows&&(this.totalRows=i,this.$el.find("#hustle-total-rows").text(i)),this.$partialRows.text(e);var s=t+"%";this.$progressBar.css("width",s),100>=t&&this.$progressText.text(t+"%")},migrateTracking:function(t){t.preventDefault();var i=this,s={action:"hustle_migrate_tracking",_ajax_nonce:e(t.currentTarget).data("nonce")};return e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:s,success:function(e){if(e.success){var s=e.data.migrated_rows,n=e.data.migrated_percentage,a=e.data.total_entries||"0";"done"!==e.data.current_meta?(i.updateProgress(s,n,a),i.migrateTracking(t)):(i.updateProgress(s,n,a),setTimeout(function(){return i.migrateComplete()},500))}else i.migrateFailed()},error:function(e){i.migrateFailed()}}),!1},createModule:function(t){var i=e(t.target),s=this.$el.find(".sui-box-selector input:checked");if(s.length){this.dismissModal(),i.addClass("sui-button-onload");var n=s.val(),a=void 0!==optinVars.module_page[n]?optinVars.module_page[n]:optinVars.module_page.popup;window.location="?page=".concat(a,"&create-module=true")}t.preventDefault()},closeDialog:function(e){SUI.closeModal(),e.preventDefault(),e.stopPropagation()},enableContinue:function(){this.$el.find("#hustle-create-new-module").prop("disabled",!1)},dismissModal:function(t){t&&t.preventDefault(),e.post(ajaxurl,{action:"hustle_dismiss_notification",name:"migrate_modal",_ajax_nonce:this.$el.data("nonce")})}}))}),Hustle.define("Upgrade_Modal",function(e){"use strict";return Backbone.View.extend({el:"#wph-upgrade-modal",opts:{},events:{"click .wpmudev-i_close":"close"},initialize:function(e){this.opts=_.extend({},this.opts,e)},close:function(e){e.preventDefault(),e.stopPropagation(),this.$el.removeClass("wpmudev-modal-active")}})}),Hustle.define("Modals.Welcome",function(e){"use strict";new(Backbone.View.extend({el:"#hustle-dialog--welcome",events:{"click #hustle-new-create-module":"createModule","click .sui-box-selector":"enableContinue","click #getStarted":"dismissModal","click .sui-onboard-skip":"dismissModal","click .sui-dialog-close":"dismissModal"},initialize:function(){this.$el.length&&setTimeout(this.show,100,this)},show:function(e){"undefined"!=typeof SUI&&void 0!==SUI.dialogs?void 0!==SUI.dialogs[e.$el.prop("id")]&&SUI.dialogs[e.$el.prop("id")].show():setTimeout(e.show,100,e)},createModule:function(t){var i=e(t.target),s=this.$el.find(".sui-box-selector input:checked");if(s.length){i.addClass("sui-button-onload");var n=s.val(),a=void 0!==optinVars.module_page[n]?optinVars.module_page[n]:optinVars.module_page.popup;window.location="?page=".concat(a,"&create-module=true")}t.preventDefault()},enableContinue:function(){this.$el.find("#hustle-new-create-module").prop("disabled",!1)},dismissModal:function(t){t&&t.preventDefault(),e.post(ajaxurl,{action:"hustle_dismiss_notification",name:"welcome_modal",_ajax_nonce:this.$el.data("nonce")})}}))}),Hustle.define("Featured_Image_Holder",function(e){"use strict";return Backbone.View.extend({template:Optin.template("wph-wizard-choose_image"),targetDiv:"",mediaFrame:!1,options:{attribute:"feature_image",multiple:!1},initialize:function(t){if(this.options.title=optinVars.messages.media_uploader.select_or_upload,this.options.button_text=optinVars.messages.media_uploader.use_this_image,this.options=_.extend({},this.options,t),!this.model||!this.options.attribute)throw new Error("Undefined model or attribute");this.targetDiv=t.targetDiv,e(document).on("click",".wpmudev-feature-image-browse",e.proxy(this.open,this)),e(document).on("click","#wpmudev-feature-image-clear",e.proxy(this.clear,this)),this.render()},render:function(){var e=this.template({image:this.model.get(this.options.attribute)});return this.setElement(e),this.defineMediaFrame(),this},showImagePreviewOrButton:function(){var e=this.model.get("feature_image");""===e||void 0===e?this.targetDiv.removeClass("sui-has_file"):this.targetDiv.addClass("sui-has_file")},defineMediaFrame:function(){var e=this;this.mediaFrame=wp.media({title:e.options.title,button:{text:e.options.button_text},multiple:e.options.multiple}).on("select",function(){var t,i,s=e.mediaFrame.state().get("selection").first().toJSON();s&&s.url&&(t=s.url,i="",e.model.set("feature_image",t),s.sizes&&s.sizes.thumbnail&&s.sizes.thumbnail.url&&(i=s.sizes.thumbnail.url),e.targetDiv.find(".sui-upload-file span").text(t).change(),e.targetDiv.find(".sui-image-preview").css("background-image","url( "+i+" )"),e.showImagePreviewOrButton())})},open:function(e){e.preventDefault(),this.mediaFrame.open()},clear:function(e){e.preventDefault(),this.model.set("feature_image",""),this.targetDiv.find(".sui-upload-file span").text("").change(),this.targetDiv.find(".sui-image-preview").css("background-image","url()"),this.showImagePreviewOrButton()}})}),Hustle.define("Modals.Edit_Field",function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--edit-field",events:{"click .sui-dialog-overlay":"closeModal","click .hustle-discard-changes":"closeModal",'change input[name="time_format"]':"changeTimeFormat","click #hustle-apply-changes":"applyChanges",'blur input[name="name"]':"trimName","change input":"fieldUpdated",'click input[type="radio"]':"fieldUpdated","change select":"fieldUpdated",'change input[name="version"]':"handleCaptchaSave"},initialize:function(e){this.field=e.field,this.changed={},this.fieldData=e.fieldData,this.model=e.model,this.render()},render:function(){this.renderHeader(),this.renderLabels(),this.renderSettings(),this.renderStyling(),this.handleCaptchaSave(),this.$(".hustle-data-pane").first().trigger("click")},renderHeader:function(){this.$(".sui-box-header .sui-tag").text(this.field.type)},renderLabels:function(){if(-1!==e.inArray(this.field.type,["recaptcha","gdpr","submit"]))return this.$("#hustle-data-tab--labels").removeClass("hustle-data-pane").addClass("sui-hidden"),void this.$("#hustle-data-pane--labels").addClass("sui-hidden");this.$("#hustle-data-tab--labels").removeClass("sui-hidden").addClass("hustle-data-pane"),this.$("#hustle-data-pane--labels").removeClass("sui-hidden");var t="hustle-"+this.field.type+"-field-labels-tpl";e("#"+t).length||(t="hustle-common-field-labels-tpl");var i=Optin.template(t);this.$("#hustle-data-pane--labels").html(i(this.fieldData)),Hustle.Events.trigger("view.rendered",this)},renderSettings:function(){if("hidden"===this.field.type)return this.$("#hustle-data-tab--settings").removeClass("hustle-data-pane").addClass("sui-hidden"),void this.$("#hustle-data-pane--settings").addClass("sui-hidden");this.$("#hustle-data-tab--settings").removeClass("sui-hidden").addClass("hustle-data-pane"),this.$("#hustle-data-pane--settings").removeClass("sui-hidden");var t="hustle-"+this.field.type+"-field-settings-tpl";e("#"+t).length||(t="hustle-common-field-settings-tpl");var i=Optin.template(t);if(this.$("#hustle-data-pane--settings").html(i(this.fieldData)),Hustle.Events.trigger("view.rendered",this),"gdpr"===this.field.type){wp.editor.remove("gdpr_message"),wp.editor.initialize("gdpr_message",{tinymce:{wpautop:!1,toolbar1:"bold,italic,strikethrough,link",valid_elements:"a[href|target=_blank],strong/b,i,u,s,em,del",forced_root_block:""},quicktags:{buttons:"strong,em,del,link"}})}else if("recaptcha"===this.field.type){var s={tinymce:{toolbar:["bold italic link alignleft aligncenter alignright"]},quicktags:!0};wp.editor.remove("v3_recaptcha_badge_replacement"),wp.editor.initialize("v3_recaptcha_badge_replacement",s),wp.editor.remove("v2_invisible_badge_replacement"),wp.editor.initialize("v2_invisible_badge_replacement",s)}},renderStyling:function(){if("hidden"===this.field.type)return this.$("#hustle-data-tab--styling").removeClass("hustle-data-pane").addClass("sui-hidden"),void this.$("#hustle-data-pane--styling").addClass("sui-hidden");this.$("#hustle-data-tab--styling").removeClass("sui-hidden").addClass("hustle-data-pane"),this.$("#hustle-data-pane--styling").removeClass("sui-hidden");var t="hustle-"+this.field.type+"-field-styling-tpl";e("#"+t).length||(t="hustle-common-field-styling-tpl");var i=Optin.template(t);this.$("#hustle-data-pane--styling").html(i(this.fieldData))},fieldUpdated:function(t){var i=e(t.target),s=i.attr("name"),n=i.is(":checkbox")?i.is(":checked"):i.val();this.changed[s]=n},closeModal:function(){this.undelegateEvents(),this.stopListening(),SUI.dialogs["hustle-dialog--edit-field"].hide()},changeTimeFormat:function(t){"12"===e(t.target).val()?(e("#hustle-date-format").closest(".sui-form-field").show(),e('input[name="time_hours"]').prop("min",1).prop("max",12)):(e("#hustle-date-format").closest(".sui-form-field").hide(),e('input[name="time_hours"]').prop("min",0).prop("max",23))},handleCaptchaSave:function(t){if("recaptcha"===this.field.type){var i=e("#available_recaptchas").val();if(i){i=i.split(",");var s=e('input[name="version"]:checked').val();-1===_.indexOf(i,s)?e("#hustle-dialog--edit-field").find("#hustle-apply-changes").attr("disabled","disabled"):e("#hustle-dialog--edit-field").find("#hustle-apply-changes").attr("disabled",!1)}else e("#hustle-dialog--edit-field").find("#hustle-apply-changes").attr("disabled","disabled")}},trimName:function(t){var i,s=this.$(t.target);i=e.trim(s.val()).replace(/ /g,"_"),s.val(i)},applyChanges:function(e){var t=this,i=this.$(e.target),s=Object.assign({},this.model.get("form_elements"));if("gdpr"===this.field.type&&"undefined"!=typeof tinyMCE){var n=tinyMCE.get("gdpr_message"),a=this.$("textarea#gdpr_message"),o="true"===a.attr("aria-hidden")?n.getContent():a.val();s.gdpr.gdpr_message=o,this.model.set("form_elements",s),this.model.userHasChange()}else if("recaptcha"===this.field.type&&"undefined"!=typeof tinyMCE){var l=tinyMCE.get("v3_recaptcha_badge_replacement"),r=this.$("textarea#v3_recaptcha_badge_replacement"),d="true"===r.attr("aria-hidden")?l.getContent():r.val();s.recaptcha.v3_recaptcha_badge_replacement=d;var u=tinyMCE.get("v2_invisible_badge_replacement"),c=this.$("textarea#v2_invisible_badge_replacement"),h="true"===c.attr("aria-hidden")?u.getContent():c.val();s.recaptcha.v2_invisible_badge_replacement=h,this.model.set("form_elements",s),this.model.userHasChange()}if(Object.keys(this.changed).length){var p=_.extend({},this.field);_.extend(this.field,this.changed),"name"in this.changed&&!this.field.name.trim().length&&(this.field.name=p.name,delete this.changed.name),"name"in this.changed||"email"===p.name?"email"===p.name&&(this.field.name="email"):(s[this.field.name]=this.field,this.model.set("form_elements",s),this.model.userHasChange()),this.trigger("field:updated",this.field,this.changed,p)}i.addClass("sui-button-onload"),setTimeout(function(){t.closeModal(),i.removeClass("sui-button-onload")},300)}})}),Hustle.define("Modals.Optin_Fields",function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--optin-fields",events:{"click .sui-box-selector input":"selectFields","click .sui-dialog-overlay":"closeModal","click .hustle-cancel-insert-fields":"closeModal","click #hustle-insert-fields":"insertFields"},initialize:function(){this.selectedFields=[]},selectFields:function(e){var t=this.$(e.target),i=t.val();this.$el.find('label[for="'+t.attr("id")+'"]').toggleClass("selected"),t.prop("checked")?this.selectedFields.push(i):this.selectedFields=_.without(this.selectedFields,i)},insertFields:function(e){var t=this,i=this.$(e.target);i.addClass("sui-button-onload"),this.trigger("fields:added",this.selectedFields),setTimeout(function(){i.removeClass("sui-button-onload"),t.closeModal()},500)},closeModal:function(){this.undelegateEvents(),this.stopListening();var e=this.$el.find(".sui-box-selector:not(.hustle-skip)"),t=e.find("input");SUI.dialogs["hustle-dialog--optin-fields"].hide(),e.removeClass("selected"),t.prop("checked",!1),t[0].checked=!1}})}),Hustle.define("Modals.Visibility_Conditions",function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--visibility-options",selectedConditions:[],opts:{groupId:0,conditions:[]},events:{"click .sui-box-selector input":"selectConditions","click .hustle-cancel-conditions":"cancelConditions","click .sui-dialog-overlay":"cancelConditions","click #hustle-add-conditions":"addConditions"},initialize:function(e){this.opts=_.extend({},this.opts,e),this.selectedConditions=this.opts.conditions,this.$(".hustle-visibility-condition-option").prop("checked",!1).prop("disabled",!1);var t=!0,i=!1,s=void 0;try{for(var n,a=this.selectedConditions[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;this.$("#hustle-condition--"+o).prop("checked",!0).prop("disabled",!0)}}catch(e){i=!0,s=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw s}}},selectConditions:function(e){var t=this.$(e.target),i=this.$el.find('label[for="'+t.attr("id")+'"]'),s=t.val();i.toggleClass("selected"),t.prop("checked")?this.selectedConditions.push(s):this.selectedConditions=_.without(this.selectedConditions,s)},cancelConditions:function(){SUI.dialogs["hustle-dialog--visibility-options"].hide()},addConditions:function(e){var t=this,i=this.$(e.target);i.addClass("sui-button-onload"),this.trigger("conditions:added",{groupId:i.data("group_id"),conditions:this.selectedConditions}),setTimeout(function(){SUI.dialogs["hustle-dialog--visibility-options"].hide(),i.removeClass("sui-button-onload"),t.undelegateEvents()},500)}})}),function(e){"use strict";Optin.listingBase=Hustle.View.extend({el:".sui-wrap",logShown:!1,moduleType:"",singleModuleActionNonce:"",_events:{"click .hustle-create-module":"openCreateModal","click .hustle-delete-module-button":"openDeleteModal","click .hustle-module-tracking-reset-button":"openResetTrackingModal","click .hustle-manage-tracking-button":"openManageTrackingModal","click .hustle-import-module-button":"openImportModal","click .hustle-upgrade-modal-button":"openUpgradeModal","click .hustle-single-module-button-action":"handleSingleModuleAction","click .hustle-preview-module-button":"openPreview","click form.sui-bulk-actions .hustle-bulk-apply-button":"bulkActionCheck","click #hustle-dialog--delete .hustle-delete":"bulkActionSend","click #hustle-bulk-action-reset-tracking-confirmation .hustle-delete":"bulkActionSend","click .sui-accordion-item-action .hustle-onload-icon-action":"addLoadingIconToActionsButton"},initialize:function(t){this.events=e.extend(!0,{},this.events,this._events),this.delegateEvents(),this.moduleType=t.moduleType,this.singleModuleActionNonce=optinVars.single_module_action_nonce;var i=Hustle.get("Modals.New_Module"),s=Hustle.get("Modals.ImportModule");new i({moduleType:this.moduleType}),this.ImportModal=new s,e(".sui-accordion-item-header").on("click",e.proxy(this.openTrackingChart,this)),e(".hustle-display-chart").length&&this.openTrackingChart(e(".hustle-display-chart")),this.doActionsBasedOnUrl()},doActionsBasedOnUrl:function(){if("true"===Module.Utils.getUrlParam("create-module")&&setTimeout(function(){e(".hustle-create-module").trigger("click")},100),"true"===Module.Utils.getUrlParam("requires-pro")){var t=this;setTimeout(function(){return t.openUpgradeModal()},100)}if(Module.Utils.getUrlParam("show-notice")){var i="success"===Module.Utils.getUrlParam("show-notice")?"success":"error",s=Module.Utils.getUrlParam("notice"),n=s&&"undefined"!==optinVars.messages.commons[s]?optinVars.messages.commons[s]:Module.Utils.getUrlParam("notice-message");void 0!==n&&n.length&&Module.Notification.open(i,n)}},handleSingleModuleAction:function(e){this.addLoadingIcon(e),Module.handleActions.initAction(e,"listing",this)},actionToggleStatus:function(e,t){var i=t.was_module_enabled,s=e.closest(".sui-accordion-item"),n=s.find(".sui-accordion-item-title span.sui-tag");i?(n.text(n.data("draft")),n.removeClass("sui-tag-blue"),n.attr("data-status","draft")):(n.text(n.data("publish")),n.addClass("sui-tag-blue"),n.attr("data-status","published")),e.find("span").toggleClass("sui-hidden"),s.hasClass("sui-accordion-item--open")&&s.find(".sui-accordion-open-indicator").trigger("click").trigger("click")},actionDisplayError:function(e,t){var i=t.message,s=e.closest(".sui-modal").find(".sui-notice-error");s.find("p").html(i),Module.Utils.accessibleShow(s,!1)},openPreview:function(t){var i=e(t.currentTarget),s=i.data("id"),n=i.data("type");Module.preview.open(s,n)},openTrackingChart:function(t){var i="";if(t.target){if(e(t.target).closest(".sui-accordion-item-action").length)return!0;t.preventDefault(),t.stopPropagation(),i=e(t.currentTarget)}else i=t;var s=i.parent(),n=s.find(".sui-chartjs-animated");if(s.hasClass("sui-accordion-item--disabled")?s.removeClass("sui-accordion-item--open"):s.hasClass("sui-accordion-item--open")?s.removeClass("sui-accordion-item--open"):s.addClass("sui-accordion-item--open"),s.find(".sui-accordion-item-data").addClass("sui-onload"),n.removeClass("sui-chartjs-loaded"),s.hasClass("sui-accordion-item--open")){var a={id:i.data("id"),_ajax_nonce:i.data("nonce"),action:"hustle_tracking_data"};e.ajax({url:ajaxurl,type:"POST",data:a,success:function(e){e.success&&e.data&&(s.find(".sui-accordion-item-body").html(e.data.html),Module.trackingChart.init(s,e.data.charts_data),n=s.find(".sui-chartjs-animated"),SUI.suiTabs()),s.find(".sui-accordion-item-data").removeClass("sui-onload"),n.addClass("sui-chartjs-loaded")},error:function(e){s.find(".sui-accordion-item-data").removeClass("sui-onload"),n.addClass("sui-chartjs-loaded")}})}},getChecked:function(t){var i=".sui-wrap .sui-accordion-item-title input[type=checkbox]";return"checked"===t&&(i+=":checked"),e(i)},bulkActionCheck:function(t){var i=e(t.target),s=i.closest(".hustle-bulk-actions-container").find('select[name="hustle_action"] option:selected').val();if(0===this.getChecked("checked").length||"undefined"===s)return!1;if("delete"===s){var n={actionClass:"hustle-delete",action:"delete",title:i.data("delete-title"),description:i.data("delete-description")};return Module.deleteModal.open(n),!1}if("reset-tracking"===s){var a={actionClass:"hustle-delete",action:"reset-tracking",title:i.data("reset-title"),description:i.data("reset-description")};return Module.deleteModal.open(a),!1}this.bulkActionSend(t,s)},bulkActionSend:function(t,i){t.preventDefault(),this.addLoadingIcon(t);var s=e(".sui-bulk-actions .hustle-bulk-apply-button"),n=i||e(t.target).data("hustle-action"),a=this.getChecked("checked");if(0===a.length)return!1;var o=[];e.each(a,function(){o.push(e(this).val())});var l={ids:o,hustle:n,type:s.data("type"),_ajax_nonce:s.data("nonce"),action:"hustle_listing_bulk"};e.ajax({url:ajaxurl,type:"POST",data:l,success:function(e){e.success?location.reload():SUI.dialogs["hustle-dialog--delete"].hide()}})},changeGraphs:function(t){if(t.stopImmediatePropagation(),!t.ignore){var i=e(t.currentTarget).closest(".sui-accordion-item--open"),s=e(t.currentTarget).val();e("div[data-panes] ."+s,i).prependTo(e("div[data-panes]",i));var n=e("div[data-tabs] div.active",i);n.length?n.trigger("click"):e("div[data-panes] div",i).removeClass("active").first().addClass("active")}},addLoadingIcon:function(t){var i=e(t.currentTarget);i.hasClass("sui-button")&&i.addClass("sui-button-onload")},addLoadingIconToActionsButton:function(t){e(t.currentTarget).closest(".sui-accordion-item-action").find(".sui-dropdown-anchor").addClass("sui-button-onload")},openCreateModal:function(t){var i="_page_hustle_sshare_listing";!1===e(t.currentTarget).data("enabled")?this.openUpgradeModal():i!==pagenow.substr(pagenow.length-i.length)?SUI.openModal("hustle-new-module--type","hustle-create-new-module","hustle-new-module--type-close",!1):SUI.openModal("hustle-new-module--create","hustle-create-new-module","hustle-module-name",!1)},openUpgradeModal:function(t){t&&(t.preventDefault(),t.stopPropagation()),e(".sui-button-onload").removeClass("sui-button-onload"),e("#hustle-dialog--upgrade-to-pro").length&&SUI.dialogs["hustle-dialog--upgrade-to-pro"].show()},openDeleteModal:function(t){t.preventDefault();var i=e(t.currentTarget),s={id:i.data("id"),nonce:i.data("nonce"),action:"delete",title:i.data("title"),description:i.data("description"),actionClass:"hustle-single-module-button-action"};Module.deleteModal.open(s)},openImportModal:function(t){!1===e(t.currentTarget).data("enabled")?this.openUpgradeModal():this.ImportModal.open(t)},openResetTrackingModal:function(t){t.preventDefault();var i=e(t.target),s={id:i.data("module-id"),nonce:this.singleModuleActionNonce,action:"reset-tracking",title:i.data("title"),description:i.data("description"),actionClass:"hustle-single-module-button-action"};Module.deleteModal.open(s)},openManageTrackingModal:function(t){var i=Optin.template("hustle-manage-tracking-form-tpl"),s=e("#hustle-dialog--manage-tracking"),n=e(t.currentTarget),a=n.data("module-id"),o={enabledTrackings:n.data("tracking-types").split(",")};s.find("#hustle-manage-tracking-form-container").html(i(o)),s.find("#hustle-button-toggle-tracking-types").data("module-id",a),SUI.dialogs["hustle-dialog--manage-tracking"].show()}})}(jQuery),Hustle.define("Modals.New_Module",function(e){"use strict";return Backbone.View.extend({el:"#hustle-new-module--dialog",data:{},events:{"click #hustle-select-mode":"modeSelected","keypress #module-mode-step":"maybeModeSelected","click #hustle-create-module":"createModule","keypress #module-name-step":"maybeCreateModule","click #hustle-new-module--create-back":"goToModeStep",'change input[name="mode"]':"modeChanged",'keydown input[name="name"]':"nameChanged"},initialize:function(e){_.extend(this.data,e)},modeChanged:function(t){var i=e(t.target).val();this.data.mode=i,this.$el.find("#hustle-select-mode").prop("disabled",!1)},nameChanged:function(t){var i=this;setTimeout(function(){i.$(".sui-error-message").hide();var s=e(t.target).val();i.data.name=s,0===s.trim().length?(i.$("#hustle-create-module").prop("disabled",!0),i.$("#error-empty-name").closest(".sui-form-field").addClass("sui-form-field-error"),i.$("#error-empty-name").show()):(i.$("#hustle-create-module").prop("disabled",!1),i.$("#error-empty-name").closest(".sui-form-field").removeClass("sui-form-field-error"),i.$("#error-empty-name").hide())},300)},modeSelected:function(e){this.$el.find('input[name="mode"]:checked').trigger("change"),0!==Object.keys(this.data).length&&(SUI.replaceModal("hustle-new-module--create","hustle-create-new-module","hustle-module-name",!1),e.preventDefault())},maybeCreateModule:function(e){13===e.which&&(e.preventDefault(),this.$("#hustle-create-module").click())},maybeModeSelected:function(e){13===e.which&&(e.preventDefault(),this.$("#hustle-select-mode").click())},goToModeStep:function(e){SUI.replaceModal("hustle-new-module--type","hustle-create-new-module","hustle-new-module--type-close",!1),e.preventDefault()},createModule:function(t){var i=e(t.target).closest("#hustle-new-module--create"),s=i.find("#error-saving-settings"),n=i.find("#hustle-create-module"),a=i.data("nonce");if(void 0===this.data.mode&&"social_sharing"!==this.data.moduleType||void 0===this.data.name||0===this.data.name.length)return s.show(),void n.removeClass("sui-button-onload");s.hide(),n.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:{data:{module_name:this.data.name,module_mode:this.data.mode,module_type:this.data.moduleType},action:"hustle_create_new_module",_ajax_nonce:a}}).done(function(e){e&&e.data&&e.data.redirect_url?window.location.replace(e.data.redirect_url):(s.show(),n.removeClass("sui-button-onload"))}).fail(function(){s.show(),n.removeClass("sui-button-onload")})}})}),Hustle.define("Modals.ImportModule",function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--import",events:{"change #hustle-import-file-input":"selectUploadFile","click .sui-upload-file":"changeFile","click .sui-upload-file button":"resetUploadFile","click .hustle-import-check-all-checkbox":"checkAll","change .hustle-module-meta-checkbox":"uncheckAllOption"},initialize:function(){},open:function(t){var i=e(t.currentTarget),s=i.data("module-id"),n=Optin.template("hustle-import-modal-options-tpl"),a=e("#hustle-dialog--import"),o=a.find("#hustle-import-module-submit-button"),l=void 0===s,r={isNew:l,isOptin:"optin"===i.data("module-mode")};a.find("#hustle-import-modal-options").html(n(r)),l?(o.removeAttr("data-module-id"),SUI.tabs(),a.find(".sui-tab-item").on("click",function(){var t=e(this);e("#"+t.data("label-for")).click()})):o.attr("data-module-id",s),SUI.openModal("hustle-dialog--import",t.currentTarget,"hustle-import-file-input",!0)},selectUploadFile:function(t){t.preventDefault();var i=e(t.target).val().replace(/C:\\fakepath\\/i,"");Module.Utils.accessibleHide(e("#hustle-dialog--import .sui-notice-error"),!1),i?(e(".sui-upload-file span:first").text(i),e(".sui-upload").addClass("sui-has_file"),e("#hustle-import-module-submit-button").prop("disabled",!1)):(e(".sui-upload").removeClass("sui-has_file"),e(".sui-upload-file span:first").text(""),e("#hustle-import-module-submit-button").prop("disabled",!0))},resetUploadFile:function(t){t.stopPropagation(),e("#hustle-import-file-input").val("").trigger("change")},changeFile:function(t){e("#hustle-import-file-input").trigger("click")},checkAll:function(t){var i=e(t.currentTarget),s=i.is(":checked");i.closest(".hui-inputs-list").find("input.hustle-module-meta-checkbox:not(.hustle-import-check-all-checkbox)").prop("checked",s)},uncheckAllOption:function(t){var i=e(t.currentTarget).closest(".hui-inputs-list").find(".hustle-import-check-all-checkbox");i.is(":checked")&&i.prop("checked",!1)}})}),Hustle.define("Mixins.Model_Updater",function(e,t,i){"use strict";return{initMix:function(){this.events=_.extend({},this.events,this._events),this.delegateEvents()},_events:{"change textarea":"_updateText",'change input[type="text"]':"_updateText",'change input[type="url"]':"_updateText",'change input[type="hidden"]':"_updateText",'change input[type="number"]':"_updateText",'change input[type="checkbox"]':"_updateCheckbox","change input[type=radio]":"_updateRadios","change select":"_updateSelect"},_updateText:function(t){var i=e(t.target),s=i.data("attribute"),n=this[i.data("model")||"model"],a=_.isTrue(i.data("silent"))?{silent:!0}:{};n&&s&&(t.stopPropagation(),n.set.call(n,s,t.target.value,a))},_updateCheckbox:function(t){var i=e(t.target),s=i.data("attribute"),n=i.val(),a=this[i.data("model")||"model"],o=_.isTrue(i.data("silent"))?{silent:!0}:{};if(a&&s)if(t.stopPropagation(),"on"!==n){var l=a.get.call(a,s);i.is(":checked")?l.push(n):l=_.without(l,n),a.set.call(a,s,l,o)}else a.set.call(a,s,i.is(":checked")?1:0,o)},_updateRadios:function(t){var i=e(t.target),s=i.data("attribute"),n=this[i.data("model")||"model"],a=_.isTrue(i.data("silent"))?{silent:!0}:{};n&&s&&(t.stopPropagation(),n.set.call(n,s,t.target.value,a))},_updateSelect:function(t){var i=e(t.target),s=i.data("attribute"),n=this[i.data("model")||"model"],a=_.isTrue(i.data("silent"))?{silent:!0}:{};n&&s&&(t.stopPropagation(),n.set.call(n,s,i.val(),a))}}}),Hustle.define("Mixins.Module_Settings",function(e,t,i){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{template:Optin.template("hustle-wizard-behaviour-tpl"),targetContainer:e("#hustle-wizard-behaviour"),events:{},init:function(e){if(this.moduleType=optinVars.current.data.module_type,this.stopListening(this.model,"change",this.viewChanged),this.listenTo(this.model,"change",this.viewChanged),"embedded"!==this.moduleType&&(this.stopListening(this.model.get("triggers"),"change",this.viewChanged),this.listenTo(this.model.get("triggers"),"change",this.viewChanged)),this.targetContainer.length)return this.render()},render:function(e){var t=this.model.toJSON();return this.setElement(this.template(_.extend({shortcode_id:optinVars.current.shortcode_id},t))),this},afterRender:function(){},viewChanged:function(e){var t=e.changed;if("on_scroll"in t){var i=this.$("#hustle-on-scroll--scrolled-toggle-wrapper"),s=this.$("#hustle-on-scroll--selector-toggle-wrapper");(i.length||s.length)&&("scrolled"===t.on_scroll?(i.removeClass("sui-hidden"),s.addClass("sui-hidden")):(s.removeClass("sui-hidden"),i.addClass("sui-hidden")))}if("on_submit"in t){var n=this.$("#hustle-on-submit-delay-wrapper");n.length&&("nothing"!==t.on_submit?n.removeClass("sui-hidden"):n.addClass("sui-hidden"))}}})}),Hustle.define("Mixins.Module_Content",function(e,t,i){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{template:Optin.template("hustle-wizard-content-tpl"),moduleType:"",targetContainer:e("#hustle-wizard-content"),events:{},init:function(e){this.stopListening(this.model,"change",this.modelUpdated),this.listenTo(this.model,"change",this.modelUpdated),this.moduleType=e.moduleType},render:function(){var e;if(this.targetContainer.length)return e=this.model.toJSON(),this.setElement(this.template(_.extend({module_type:this.moduleType},e))),this},afterRender:function(){this.targetContainer.length&&this.renderFeaturedImage(),optinVars.is_new&&Module.Notification.open("success",optinVars.messages.commons.module_created.replace(/{type_name}/g,optinVars.module_name[this.moduleType]),1e4)},renderFeaturedImage:function(){var e=Hustle.get("Featured_Image_Holder"),t=this.$("#wph-wizard-choose_image");t.length&&(this.mediaHolder=new e({model:this.model,attribute:"feature_image",moduleType:this.moduleType,targetDiv:t}),t.html(""),t.html(this.mediaHolder.$el))},modelUpdated:function(e){var t=e.changed;"module_name"in t&&this.model.set("module_name",t.module_name,{silent:!0}),"feature_image"in t&&Hustle.Events.trigger("modules.view.feature_image_updated",t)}})}),Hustle.define("Mixins.Module_Design",function(e,t,i){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{template:Optin.template("hustle-wizard-appearance-tpl"),targetContainer:e("#hustle-wizard-appearance"),cssEditor:!1,modalSelectors:{".hustle-layout .hustle-layout-content ":"Layout",".hustle-layout .hustle-title":"Title",".hustle-layout .hustle-subtitle ":"Subtitle",".hustle-layout .hustle-layout-content .hustle-image img ":"Feat. Image",".hustle-layout .hustle-layout-content .hustle-group-content p ":"Main Content",".hustle-layout .hustle-button-cta ":"CTA Button"},formSelectors:{".hustle-layout .hustle-layout-body .hustle-layout-form ":"Form Container",".hustle-layout .hustle-layout-body .hustle-layout-form .hustle-input ":"Input",".hustle-layout .hustle-layout-body .hustle-layout-form .hustle-button-submit ":"Submit",".hustle-success ":"Success Container",".hustle-success .hustle-success-content p ":"Success Message"},formExtraSelectors:{".hustle-layout .hustle-layout-body .hustle-form-options ":"Container",".hustle-layout .hustle-layout-body .hustle-form-options .hustle-group-title ":"Title",".hustle-layout .hustle-layout-body .hustle-radio span[aria-hidden]":"Radio",".hustle-layout .hustle-layout-body .hustle-radio span:not([aria-hidden])":"Radio (Label)",".hustle-layout .hustle-layout-body .hustle-checkbox span[aria-hidden]":"Checkbox",".hustle-layout .hustle-layout-body .hustle-checkbox span:not([aria-hidden])":"Checkbox (Label)"},events:{"click .hustle-css-stylable":"insertSelector","click .hustle-reset-color-palette":"resetPickers"},init:function(){if(void 0!==optinVars.current.data.module_type&&"embedded"===optinVars.current.data.module_type||e.extend(this.modalSelectors,{".hustle-button-close":"Close Button"}),this.stopListening(this.model,"change",this.viewChanged),this.listenTo(this.model,"change",this.viewChanged),Hustle.Events.off("modules.view.feature_image_updated").on("modules.view.feature_image_updated",e.proxy(this.ViewChangedContentTab,this)),this.targetContainer.length)return this.render()},render:function(){return this.setElement(this.template(_.extend({modalSelectors:this.modalSelectors,formSelectors:this.formSelectors,formExtraSelectors:this.formExtraSelectors},this.model.toJSON()))),this},afterRender:function(){this.createPickers(),this.createEditor(),this.cssChange(),this.addCreatePalettesLink()},createPickers:function(){var t=this,i=this.$(".sui-colorpicker-input");i.wpColorPicker({change:function(t,i){var s=e(this);s.val()!==i.color.toCSS()&&s.val(i.color.toCSS()).trigger("change")},palettes:["#333333","#FFFFFF","#17A8E3","#E1F6FF","#666666","#AAAAAA","#E6E6E6"]}),i.hasClass("wp-color-picker")&&i.each(function(){var i=e(this),s=i.closest(".sui-colorpicker-wrap"),n=s.find(".sui-colorpicker-value span[role=button]"),a=s.find(".sui-colorpicker-value"),o=a.find("button"),l="hex",r=i.closest(".wp-picker-container"),d=r.find(".wp-color-result"),u=d.find(".color-alpha"),c=r.find(".wp-picker-clear");!0===i.data("alpha")?(l="rgba",i.bind("change",function(){n.find("span").css({"background-color":u.css("background")}),a.find("input").val(i.val())})):i.bind("change",function(){n.find("span").css({"background-color":d.css("background-color")}),a.find("input").val(i.val())}),s.find(".sui-colorpicker").addClass("sui-colorpicker-"+l),s.find(".sui-button, span[role=button]").on("click",function(e){d.click(),e.preventDefault(),e.stopPropagation()}),o.on("click",function(e){var s=i.data("attribute"),o=t.model.get("color_palette"),l=optinVars.palettes[o][s];c.click(),a.find("input").val(l),i.val(l).trigger("change"),n.find("span").css({"background-color":l}),e.preventDefault(),e.stopPropagation()})})},updatePickers:function(e){var t=this;if(void 0!==optinVars.palettes[e]){var i=optinVars.palettes[e];_.each(i,function(e,i){t.$('input[data-attribute="'+i+'"]').val(e).trigger("change")})}},resetPickers:function(t){var i=e(t.target);i.addClass("sui-button-onload").prop("disabled",!0);var s=e('select[data-attribute="color_palette"]').val();this.updatePickers(s),setTimeout(function(){i.removeClass("sui-button-onload").prop("disabled",!1)},500)},addCreatePalettesLink:function(){var e=this.$("#hustle-create-palette-link"),t=this.$(".select-container.hui-select-palette .list-results");t.find(".hui-button").length||t.append(e)},createEditor:function(){this.cssEditor=ace.edit("hustle_custom_css"),this.cssEditor.getSession().setMode("ace/mode/css"),this.cssEditor.$blockScrolling=1/0,this.cssEditor.setTheme("ace/theme/sui"),this.cssEditor.getSession().setUseWrapMode(!0),this.cssEditor.getSession().setUseWorker(!1),this.cssEditor.setShowPrintMargin(!1),this.cssEditor.renderer.setShowGutter(!0),this.cssEditor.setHighlightActiveLine(!0)},updateCustomCss:function(){this.cssEditor&&this.model.set("custom_css",this.cssEditor.getValue())},cssChange:function(){var e=this;this.cssEditor.getSession().on("change",function(){e.model.userHasChange()})},insertSelector:function(t){var i=e(t.target).data("stylable")+"{}";this.cssEditor.navigateFileEnd(),this.cssEditor.insert(i),this.cssEditor.navigateLeft(1),this.cssEditor.focus(),t.preventDefault()},viewChanged:function(e){var t=e.changed;if("form_layout"in t){var i=this.$("#hustle-feature-image-position-option"),s=this.$("#hustle-feature-image-above-label"),n=this.$("#hustle-feature-image-below-label");if(s.length||n.length)if("one"===t.form_layout)s.removeClass("sui-hidden"),n.removeClass("sui-hidden");else{var a=e.get("feature_image_position");"left"!==a&&"right"!==a&&(i.find("input").prop("checked",!1),i.find("#hustle-feature-image-left").prop("checked",!0),this.model.set("feature_image_position","left"),i.find(".sui-tab-item").removeClass("active"),i.find("#hustle-feature-image-left-label").addClass("active")),s.addClass("sui-hidden"),n.addClass("sui-hidden")}}if("color_palette"in t&&this.updatePickers(t.color_palette),"border"in t){var o=this.$("#hustle-border-toggle-wrapper");o.length&&(t.border?o.removeClass("sui-hidden"):o.addClass("sui-hidden"))}if("drop_shadow"in t){var l=this.$("#hustle-drop-shadow-toggle-wrapper");l.length&&(t.drop_shadow?l.removeClass("sui-hidden"):l.addClass("sui-hidden"))}if("customize_size"in t){var r=this.$("#hustle-customize-size-toggle-wrapper");r.length&&(t.customize_size?r.removeClass("sui-hidden"):r.addClass("sui-hidden"))}else if("customize_css"in t){var d=this.$("#hustle-customize-css-toggle-wrapper");d.length&&(t.customize_css?d.removeClass("sui-hidden"):d.addClass("sui-hidden"))}else if("feature_image_horizontal"in t){var u=this.$("#hustle-image-custom-position-horizontal");u.length&&("custom"!==t.feature_image_horizontal?u.prop("disabled",!0):u.prop("disabled",!1))}else if("feature_image_vertical"in t){var c=this.$("#hustle-image-custom-position-vertical");c.length&&("custom"!==t.feature_image_vertical?c.prop("disabled",!0):c.prop("disabled",!1))}},ViewChangedContentTab:function(e){if("feature_image"in e){var t=this.$("#hustle-appearance-feature-image-placeholder"),i=this.$("#hustle-appearance-feature-image-settings");t.length&&i.length&&(e.feature_image?(i.show(),t.hide()):(i.hide(),t.show()))}}})}),Hustle.define("Mixins.Module_Display",function(e,t,i){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{template:Optin.template("hustle-wizard-display-tpl"),moduleId:0,moduleType:"",targetContainer:e("#hustle-wizard-display"),events:{},extViewChanged:_.noop,init:function(e){this.stopListening(this.model,"change",this.viewChanged),this.listenTo(this.model,"change",this.viewChanged),this.moduleType=e.moduleType},render:function(){var e;if(this.targetContainer.length)return e=this.model.toJSON(),this.setElement(this.template(_.extend({module_type:this.moduleType},e))),this},afterRender:function(){},viewChanged:function(e){var t=e.changed;this.extViewChanged(t)}})}),Hustle.define("Mixins.Module_Emails",function(e,t,i){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{template:Optin.template("hustle-wizard-emails-tpl"),targetContainer:e("#hustle-wizard-emails"),events:{"click .hustle-optin-field--add":"addFields","click .hustle-optin-field--edit":"editField","click .sui-builder-field":"maybeEditField","click .hustle-optin-field--delete":"deleteFieldOnClick","click ul.list-results li":"setFieldOption","click .hustle-optin-field--copy":"duplicateField"},init:function(e){if(this.stopListening(this.model,"change",this.viewChanged),this.listenTo(this.model,"change",this.viewChanged),this.targetContainer.length)return this.render()},render:function(){var t=this.model.toJSON(),i=this.model.get("form_elements");for(var s in this.setElement(this.template(t)),i){var n=i[s];i[s]=_.extend({},this.getFieldDefaults(n.type),n),"submit"!==s&&this.addFieldToPanel(i[s])}this.model.set("form_elements",i,{silent:!0});var a=this.$("#hustle-form-fields-container").sortable({axis:"y",containment:".sui-box-builder"});return a.on("sortupdate",e.proxy(this.fieldsOrderChanged,this,a)),this},afterRender:function(){this.updateDynamicValueFields()},resetDynamicValueFieldsPlaceholders:function(){this.$("select.hustle-field-options").html(""),this.$(".hustle-fields-placeholders-options").length&&this.$(".hustle-fields-placeholders-options").html("")},updateDynamicValueFields:function(){var t=this.model.get("form_elements");for(var i in this.resetDynamicValueFieldsPlaceholders(),t)"submit"!==i&&"recaptcha"!==i&&"gdpr"!==i&&(this.addFieldToDynamicValueFields(t[i]),this.$("select.hustle-field-options").trigger("sui:change"));this.$("div.select-list-container .list-results:empty").each(function(){var t=e(this).closest(".select-container").find("select.hustle-field-options").data("type");e(this).html('<li style="cursor: default; pointer-events: none;">'+optinVars.messages.form_fields.errors.no_fileds_info.replace("{field_type}",t)+"</li>")})},fieldsOrderChanged:function(e){var t=this.model.get("form_elements"),i=e.sortable("toArray",{attribute:"data-field-id"}),s={},n=!0,a=!1,o=void 0;try{for(var l,r=i[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;s[d]=t[d]}}catch(e){a=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(a)throw o}}s=_.extend({},s,t),this.model.set("form_elements",s)},viewChanged:function(e){var t=e.changed;if("auto_close_success_message"in t){var i=this.$("#section-auto-close-success-message .sui-row");i.length&&("1"===t.auto_close_success_message?i.removeClass("sui-hidden"):i.addClass("sui-hidden"))}"form_elements"in t&&this.updateDynamicValueFields()},addFields:function(){(new(Hustle.get("Modals.Optin_Fields"))).on("fields:added",e.proxy(this.addNewFields,this)),SUI.dialogs["hustle-dialog--optin-fields"].show()},maybeEditField:function(t){e(t.target).closest(".sui-dropdown").length||this.editField(t)},editField:function(t){var i=e(t.target).closest(".sui-builder-field").data("field-id"),s=this.model.get("form_elements")[i],n=Object.assign({},this.getFieldViewDefaults(s.type),s);new(Hustle.get("Modals.Edit_Field"))({field:s,fieldData:n,model:this.model}).on("field:updated",e.proxy(this.formFieldUpdated,this)),SUI.dialogs["hustle-dialog--edit-field"].show()},formFieldUpdated:function(e,t,i){if(Object.keys(t).length){if("name"in t)return this.addNewFields(e.type,e,i.name),void this.deleteField(i.name);var s=this.$("#hustle-optin-field--"+e.name);if("required"in t){var n=s.find(".sui-error"),a=e.required;_.isTrue(a)?n.show():_.isFalse(a)&&n.hide()}if("label"in t)this.updateDynamicValueFields(),s.find(".hustle-field-label-text").text(e.label)}},deleteFieldOnClick:function(t){var i=e(t.target).closest(".sui-builder-field").data("field-id");this.deleteField(i)},setFieldOption:function(t){var i=e(t.target),s=i.find("span:eq(1)").text();i.closest(".sui-insert-variables").find('input[type="text"]').val(s).trigger("change")},deleteField:function(t){var i=this.$("#hustle-optin-field--"+t),s=Object.assign({},this.model.get("form_elements"));delete s[t],this.model.set("form_elements",s),-1!==jQuery.inArray(t,["gdpr","recaptcha"])?(i.addClass("sui-hidden"),e("#hustle-optin-insert-field--"+t).prop("disabled",!1).prop("checked",!1)):i.remove()},duplicateField:function(t){var i=e(t.target).closest(".sui-builder-field").data("field-id"),s=Object.assign({},this.model.get("form_elements")),n=Object.assign({},s[i]);delete n.name,n.can_delete=!0,this.addNewFields(n.type,n)},addNewFields:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=Object.assign({},this.model.get("form_elements"));if(Array.isArray(e)){var n=!0,a=!1,o=void 0;try{for(var l,r=e[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value,u=this.getFieldDefaults(d);t&&d in t&&_.extend(u,t[d]),this.addFieldToPanel(u),s[u.name]=u}}catch(e){a=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(a)throw o}}}else{var c=this.getFieldDefaults(e);if(t&&_.extend(c,t),this.addFieldToPanel(c,i),null===i)s[c.name]=c;else{var h=[];jQuery.each(s,function(e,t){h[e]=t,e===i&&(h[c.name]=c)}),s=h}}this.model.set("form_elements",s)},addFieldToDynamicValueFields:function(t){var i=e("<option/>",{value:t.name,"data-content":"{"+t.name+"}"}).text(t.label),s='<li><button value="{'.concat(t.name,'}">').concat(t.label,"</button></li>");this.$('select.hustle-field-options:not([data-type]), select.hustle-field-options[data-type="'+t.type+'"]').append(i),this.$(".hustle-fields-placeholders-options").length&&this.$(".hustle-fields-placeholders-options").append(s)},addFieldToPanel:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=Optin.template("hustle-form-field-row-tpl"),n=this.$("#hustle-form-fields-container");if(t=_.extend({},this.getFieldViewDefaults(t.type),t),-1!==jQuery.inArray(t.type,["gdpr","recaptcha"]))this.$("#hustle-optin-field--"+t.type).removeClass("sui-hidden"),e("#hustle-optin-insert-field--"+t.type).prop("checked",!0).prop("disabled",!0);else if(null===i)n.append(s(t));else{var a=this.$("#hustle-optin-field--"+i);0<a.length?a.after(s(t)):n.append(s(t))}},getNewFieldId:function(e){for(var t=Object.assign({},this.model.get("form_elements")),i=e;i in t&&-1===jQuery.inArray(i,["gdpr","recaptcha","submit"]);)i=e+"-"+Math.floor(99*Math.random());return i},getFieldDefaults:function(e){var t=this.getNewFieldId(e),i={label:optinVars.messages.form_fields.label[e+"_label"],required:"false",css_classes:"",type:e,name:t,required_error_message:optinVars.messages.required_error_message.replace("{field}",e),validation_message:optinVars.messages.validation_message.replace("{field}",e),placeholder:""};switch(e){case"timepicker":i.time_format="12",i.time_hours="9",i.time_minutes="30",i.time_period="am",i.validation_message=optinVars.messages.time_validation_message,i.required_error_message=optinVars.messages.is_required.replace("{field}",i.label),i.validate="false";break;case"datepicker":i.date_format="mm/dd/yy",i.validation_message=optinVars.messages.date_validation_message,i.required_error_message=optinVars.messages.is_required.replace("{field}",i.label),i.validate="false";break;case"recaptcha":i.threshold="0.5",i.version="v2_checkbox",i.recaptcha_type="compact",i.recaptcha_theme="light",i.v2_invisible_theme="light",i.recaptcha_language="automatic",i.v2_invisible_show_badge="1",i.v2_invisible_badge_replacement=optinVars.messages.form_fields.recaptcha_badge_replacement,i.v3_recaptcha_show_badge="1",i.v3_recaptcha_badge_replacement=optinVars.messages.form_fields.recaptcha_badge_replacement,i.validation_message=optinVars.messages.recaptcha_validation_message,i.error_message=optinVars.messages.form_fields.recaptcha_error_message;break;case"gdpr":i.gdpr_message=optinVars.messages.form_fields.gdpr_message,i.required="true",i.required_error_message=optinVars.messages.gdpr_required_error_message;break;case"email":i.validate="true";break;case"url":i.required_error_message=optinVars.messages.url_required_error_message,i.validate="true";break;case"phone":i.validate="false";break;case"hidden":i.default_value="",i.custom_value="";break;case"number":case"text":i.required_error_message=optinVars.messages.cant_empty}return i},getFieldViewDefaults:function(e){var t={required:"false",validated:"false",placeholder_placeholder:optinVars.messages.form_fields.label.placeholder,label_placeholder:"",name_placeholder:"",icon:"send",css_classes:"",type:e,name:e,placeholder:optinVars.messages.form_fields.label[e+"_placeholder"],can_delete:!0,fieldId:this.getNewFieldId(e)};switch(e){case"email":t.icon="mail";break;case"name":t.icon="profile-male";break;case"phone":t.icon="phone";break;case"address":t.icon="pin";break;case"url":t.icon="web-globe-world";break;case"text":t.icon="style-type";break;case"number":t.icon="element-number";break;case"timepicker":t.icon="clock";break;case"datepicker":t.icon="calendar";break;case"recaptcha":t.icon="recaptcha";break;case"gdpr":t.icon="gdpr";break;case"hidden":t.icon="eye-hide"}return t}})}),Hustle.define("Module.IntegrationsView",function(e,t,i){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-box-section-integrations",events:{"click .connect-integration":"connectIntegration","keypress .connect-integration":"preventEnterKeyFromDoingThings"},init:function(e){this.moduleId=e.moduleId,this.listenTo(Hustle.Events,"hustle:providers:reload",this.renderProvidersTables),this.render()},render:function(){var e=this.$el.find("#hustle-not-connected-providers-section"),t=this.$el.find("#hustle-connected-providers-section");0<e.length&&0<t.length&&this.renderProvidersTables()},renderProvidersTables:function(){var t=this,i={};this.$el.find(".hustle-integrations-display").html('<div class="sui-notice sui-notice-sm sui-notice-loading"><p>'+optinVars.fetching_list+"</p></div>"),i.action="hustle_provider_get_form_providers",i._ajax_nonce=optinVars.providers_action_nonce,i.data={moduleId:this.moduleId},e.post({url:ajaxurl,type:"post",data:i}).done(function(e){if(e&&e.success){var i=t.$el.find("#hustle-integrations-active-integrations"),s=t.$el.find("#hustle-integrations-active-count");t.$el.find("#hustle-not-connected-providers-section").html(e.data.not_connected),t.$el.find("#hustle-connected-providers-section").html(e.data.connected),i.val()!==e.data.list_connected&&i.val(e.data.list_connected).trigger("change"),s.val()!==String(e.data.list_connected_total)&&s.val(e.data.list_connected_total).trigger("change")}}).always(function(){t.$el.find(".sui-box-body").removeClass("sui-block-content-center"),t.$el.find(".sui-notice-loading").remove()})},preventEnterKeyFromDoingThings:function(e){13!==e.which||e.preventDefault()},connectIntegration:function(e){Module.integrationsModal.open(e)}}))}),Hustle.define("Mixins.Module_Visibility",function(e,t,i){"use strict";return _.extend({},Hustle.get("Mixins.Model_Updater"),{el:"#hustle-conditions-group",targetContainer:e("#hustle-conditions-group"),events:{"click .hustle-choose-conditions":"openConditionsModal","click .hustle-remove-visibility-group":"removeGroup","change .visibility-group-filter-type":"updateGroupFilterType","change .visibility-group-apply-on":"updateGroupApplyOn"},init:function(e){this.activeConditions={},this.render(),this.groupId=""},render:function(){var t=this.model.get("conditions").toJSON();if(e.isEmptyObject(t))this.addNewGroup();else for(var i in t){var s=this.model.get("conditions."+i);s instanceof Backbone.Model||(_.isEmpty(s)&&_.isArray(s)&&(s={}),s=this.getConditionsGroupModel(s),this.model.set("conditions."+i,s,{silent:!0})),this.addGroupToPanel(s,"render")}},afterRender:function(){this.bindRemoveConditions()},bindRemoveConditions:function(){e("#hustle-conditions-group .hustle-remove-visibility-condition").off("click").on("click",e.proxy(this.removeCondition,this))},openConditionsModal:function(t){var i=this,s=e(t.currentTarget).data("group-id"),n=this.model.get("conditions."+s),a=void 0!==n?Object.keys(n.toJSON()):[];new(Hustle.get("Modals.Visibility_Conditions"))({groupId:s,conditions:a}).on("conditions:added",e.proxy(i.addNewConditions,i)),this.groupId=s,"done"!==e("html").data("show-was-bind")&&(SUI.dialogs["hustle-dialog--visibility-options"].on("show",function(t){e("#hustle-add-conditions").data("group_id",i.groupId)}),e("html").data("show-was-bind","done")),SUI.dialogs["hustle-dialog--visibility-options"].show()},addNewConditions:function(t){var i=this,s=t.groupId,n=t.conditions,a=this.model.get("conditions."+s);e.each(n,function(e,t){if(a.get(t))return!0;i.addConditionToPanel(t,{},s,a,"new")}),this.bindRemoveConditions(),Hustle.Events.trigger("view.rendered",this)},addGroupToPanel:function(t,i){var s=t.get("group_id"),n=e("#hustle-visibility-conditions-box"),a=Optin.template("hustle-visibility-group-box-tpl")(_.extend({},{groupId:s,apply_on_float:t.get("apply_on_float"),apply_on_inline:t.get("apply_on_inline"),apply_on_widget:t.get("apply_on_widget"),filter_type:t.get("filter_type")}));e(a).insertBefore(n.find(".hustle-add-new-visibility-group")),this.activeConditions[s]={};var o=this,l=t.toJSON();e.each(l,function(e,n){if("object"!==_typeof(n))return!0;o.addConditionToPanel(e,n,s,t,i)})},addConditionToPanel:function(t,i,s,n,a){if(void 0!==Optin.View.Conditions[t]){var o=this.$("#hustle-visibility-group-"+s+" .sui-box-builder-body"),l=new Optin.View.Conditions[t]({type:this.moduleType,model:n,groupId:s,source:a});if(l)return o.find(".sui-builder-field").length||(o.find(".sui-box-builder-message-block").hide(),o.find(".sui-button-dashed").show()),e.isEmptyObject(i)?n.set(t,l.getConfigs()):n.set(t,i),this.activeConditions[s][t]=l,e(l.$el).appendTo(o.find(".sui-builder-fields")),l}},addNewGroup:function(){var e=this.getConditionsGroupModel(),t=e.get("group_id");this.model.set("conditions."+t,e),this.addGroupToPanel(e,"new"),Hustle.Events.trigger("view.rendered",this)},removeGroup:function(t){var i=e(t.currentTarget).data("group-id"),s=this.$("#hustle-visibility-group-"+i);delete this.activeConditions[i],this.model.get("conditions").unset(i),s.remove(),Object.keys(this.activeConditions).length||this.addNewGroup()},removeCondition:function(t){var i=e(t.currentTarget),s=i.data("condition-id"),n=i.data("group-id"),a=this.$("#hustle-visibility-group-"+n+" .sui-box-builder-body");this.activeConditions[n][s].remove(),delete this.activeConditions[n][s],this.model.get("conditions."+n).unset(s),a.find(".sui-builder-field").length||a.find(".sui-box-builder-message-block").show(),this.bindRemoveConditions()},updateGroupFilterType:function(t){t.stopPropagation();var i=e(t.target),s=i.data("group-id"),n=i.val();this.model.get("conditions."+s).set("filter_type",n)},updateGroupApplyOn:function(t){t.stopPropagation();var i=e(t.target),s=i.data("group-id"),n=i.data("property"),a=i.is(":checked"),o=this.model.get("conditions."+s);("embedded"===this.moduleType&&-1!==e.inArray(n,["apply_on_inline","apply_on_widget"])||"social_sharing"===this.moduleType&&-1!==e.inArray(n,["apply_on_float","apply_on_inline","apply_on_widget"]))&&o.set(n,a)},getConditionsGroupModel:function(e){if(!e){var t=(new Date).getTime().toString(16);this.model.get("conditions."+t),e={group_id:t,filter_type:"all"},"embedded"===this.moduleType?(e.apply_on_inline=!0,e.apply_on_widget=!0):"social_sharing"===this.moduleType&&(e.apply_on_float=!0,e.apply_on_inline=!0,e.apply_on_widget=!0)}return new(Hustle.get("Model"))(e)}})}),Hustle.define("Mixins.Wizard_View",function(e,t,i){"use strict";return{moduleType:"",el:".sui-wrap",events:{"click .sui-sidenav .sui-vertical-tab a":"sidenav","click a.hustle-go-to-tab":"sidenav","click a.notify-error-tab":"sidenav","click .hustle-action-save":"saveChanges","click .wpmudev-button-navigation":"doButtonNavigation","change #hustle-module-name":"updateModuleName","click #hustle-preview-module":"previewModule","blur input.sui-form-control":"removeErrorMessage"},init:function(t){return this.setTabsViews(t),Hustle.Events.off("modules.view.switch_status",e.proxy(this.switchStatusTo,this)),Hustle.Events.on("modules.view.switch_status",e.proxy(this.switchStatusTo,this)),e(i).off("popstate",e.proxy(this.updateTabOnPopstate,this)),e(i).on("popstate",e.proxy(this.updateTabOnPopstate,this)),e(document).off("tinymce-editor-init",e.proxy(this.tinymceReady,this)),e(document).on("tinymce-editor-init",e.proxy(this.tinymceReady,this)),void 0!==this._events&&(this.events=e.extend(!0,{},this.events,this._events),this.delegateEvents()),this.render(),this},setTabsViews:function(e){this.contentView=e.contentView,this.emailsView=e.emailsView,this.designView=e.designView,this.integrationsView=e.integrationsView,this.visibilityView=e.visibilityView,this.settingsView=e.settingsView,this.moduleType=this.model.get("module_type"),"embedded"===this.moduleType&&(this.displayView=e.displayView)},render:function(){this.renderTabs()},renderTabs:function(){this.contentView.targetContainer.html(""),this.contentView.render(),this.contentView.delegateEvents(),this.contentView.targetContainer.append(this.contentView.$el),this.contentView.afterRender(),this.emailsView.targetContainer.html(""),this.emailsView.delegateEvents(),this.emailsView.targetContainer.append(this.emailsView.$el),this.emailsView.afterRender(),this.integrationsView.delegateEvents(),this.designView.targetContainer.html(""),this.designView.delegateEvents(),this.designView.targetContainer.append(this.designView.$el),this.designView.afterRender(),"embedded"===this.moduleType&&(this.displayView.targetContainer.html(""),this.displayView.render(),this.displayView.delegateEvents(),this.displayView.targetContainer.append(this.displayView.$el),this.displayView.afterRender()),this.visibilityView.delegateEvents(),this.visibilityView.targetContainer.append(this.visibilityView.$el),this.visibilityView.afterRender(),this.settingsView.targetContainer.html(""),this.settingsView.delegateEvents(),this.settingsView.targetContainer.append(this.settingsView.$el),this.settingsView.afterRender()},sidenav:function(t){t.preventDefault();var i=e(t.target).data("tab");i&&this.goToTab(i,!0)},goToTab:function(t,i){var s=this.$el.find('a[data-tab="'+t+'"]'),n=s.closest(".sui-vertical-tabs").find(".sui-vertical-tab a"),a=this.$el.find(".sui-box[data-tab]"),o=this.$el.find('.sui-box[data-tab="'+t+'"]');if(i){var l={tabName:t},r=this.model.get("module_id");history.pushState(l,"Hustle "+this.moduleType+" wizard","admin.php?page="+optinVars.current.wizard_page+"&id="+r+"&section="+t)}n.removeClass("current"),a.hide(),s.addClass("current"),o.show(),e(".sui-wrap-hustle")[0].scrollIntoView()},updateTabOnPopstate:function(e){var t=e.originalEvent.state;t&&this.goToTab(t.tabName)},doButtonNavigation:function(t){t.preventDefault();var i="prev"===e(t.target).data("direction")?"prev":"next",s=this.getNextOrPrevTabName(i);this.goToTab(s,!0)},getNextOrPrevTabName:function(t){var i=e("#hustle-module-wizard-view .sui-sidenav ul li a.current");i.data("tab");return"prev"===t?i.parent().prev().find("a").data("tab"):i.parent().next().find("a").data("tab")},tinymceReady:function(t,i){var s=this;i.on("change",function(){Module.hasChanges||s.contentView.model.userHasChange()}),e("textarea#"+i.id).on("change",function(){Module.hasChanges||s.contentView.model.userHasChange()})},setContentFromTinymce:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if("undefined"!=typeof tinyMCE){var t=tinyMCE.get("main_content"),i=this.$("textarea#main_content"),s="true"===i.attr("aria-hidden")?t.getContent():i.val();this.contentView.model.set("main_content",s,{silent:e});var n=tinyMCE.get("success_message"),a=this.$("textarea#success_message"),o="true"===a.attr("aria-hidden")?n.getContent():a.val();this.emailsView.model.set("success_message",o,{silent:e});var l=tinyMCE.get("email_body"),r=this.$("textarea#email_body"),d="true"===a.attr("aria-hidden")?l.getContent():r.val();this.emailsView.model.set("email_body",d,{silent:e})}},sanitizeData:function(){var e=this.contentView.model.get("cta_url");/^(f|ht)tps?:\/\//i.test(e)||(e="https://"+e,this.contentView.model.set("cta_url",e,{silent:!0})),this.designView.updateCustomCss()},validate:function(){this.setContentFromTinymce(!0),this.sanitizeData();var t=this,i=this.$el.find("#hustle-module-wizard-view"),s=i.data("id")?i.data("id"):"-1",n={action:"hustle_validate_module",_ajax_nonce:i.data("nonce"),id:s,module:this.model.toJSON()};return _.extend(n,this.getDataToSave()),e.ajax({url:ajaxurl,type:"POST",data:n,dataType:"json",success:function(i){if(!0===i.success)Module.hasChanges=!1,t.switchStatusTo("saved");else{var s=i.data,n="";void 0!==s.data.icon_error&&(_.each(s.data.icon_error,function(t){e("#hustle-platform-"+t).find(".sui-error-message").show(),e("#hustle-platform-"+t+" .hustle-social-url-field").addClass("sui-form-field-error"),e("#hustle-platform-"+t).not(".sui-accordion-item--open").find(".sui-accordion-open-indicator").click()}),n='<a href="#" data-tab="services" class="notify-error-tab"> Services </a>'),void 0!==s.data.selector_error&&(_.each(s.data.selector_error,function(t){e('input[name="'+t+'_css_selector"]').siblings(".sui-error-message").show(),e('input[name="'+t+'_css_selector"]').parent(".sui-form-field").addClass("sui-form-field-error")}),_.isEmpty(n)||(n+=" and "),n+='<a href="#" data-tab="display" class="notify-error-tab"> Display Options </a>'),n=optinVars.messages.sshare_module_error.replace("{page}",n),Module.Notification.open("error",n,1e9)}}})},save:function(){this.setContentFromTinymce(!0),this.sanitizeData();var t=this,i=this.$el.find("#hustle-module-wizard-view"),s=i.data("id")?i.data("id"):"-1",n={action:"hustle_save_module",_ajax_nonce:i.data("nonce"),id:s,module:this.model.toJSON()};return _.extend(n,this.getDataToSave()),e.ajax({url:ajaxurl,type:"POST",data:n,dataType:"json",success:function(i){if(!0===i.success)Module.hasChanges=!1,t.switchStatusTo("saved");else{var s=i.data,n="";void 0!==s.data.icon_error&&(_.each(s.data.icon_error,function(t){e("#hustle-platform-"+t).find(".sui-error-message").show(),e("#hustle-platform-"+t+" .hustle-social-url-field").addClass("sui-form-field-error"),e("#hustle-platform-"+t).not(".sui-accordion-item--open").find(".sui-accordion-open-indicator").click()}),n='<a href="#" data-tab="services" class="notify-error-tab"> Services </a>'),void 0!==s.data.selector_error&&(_.each(s.data.selector_error,function(t){e('input[name="'+t+'_css_selector"]').siblings(".sui-error-message").show(),e('input[name="'+t+'_css_selector"]').parent(".sui-form-field").addClass("sui-form-field-error")}),_.isEmpty(n)||(n+=" and "),n+='<a href="#" data-tab="display" class="notify-error-tab"> Display Options </a>'),n=optinVars.messages.sshare_module_error.replace("{page}",n),Module.Notification.open("error",n,1e4)}}})},getDataToSave:function(){var e={content:this.contentView.model.toJSON(),emails:this.emailsView.model.toJSON(),design:this.designView.model.toJSON(),integrations_settings:this.integrationsView.model.toJSON(),visibility:this.visibilityView.model.toJSON(),settings:this.settingsView.model.toJSON()};return"embedded"===this.moduleType&&(e.display=this.displayView.model.toJSON()),e},saveChanges:function(t){var i=this,s=this.model.get("active"),n=void 0!==e(t.currentTarget).data("active")&&String(e(t.currentTarget).data("active")),a=!1,o=!1;!1!==n&&("0"===n?i.disableButtonsOnSave("draft"):i.disableButtonsOnSave("publish")),this.validate().done(function(e){if(e.success){!1!==n&&e.success&&(o=!0,"0"!==n&&n!==s&&i.publishingFlow("loading"),n!==s&&(a=!0,i.model.set("active",n,{silent:!0})));var t=i.save();t&&o?t.done(function(e){"string"==typeof e&&(e=JSON.parse(e)),e.success&&a&&i.updateViewOnActiveChange(),"0"!==n&&n!==s&&e.success&&a&&setTimeout(function(){i.publishingFlow("ready")},500)}).always(function(){i.enableSaveButtons()}):i.enableSaveButtons()}else i.switchStatusTo("unsaved"),i.enableSaveButtons()}),t.preventDefault()},updateModuleName:function(t){var i=e(t.target).val();i.length?(this.$("#hustle-module-name-wrapper").removeClass("sui-form-field-error"),this.$("#hustle-module-name-error").hide(),this.model.set("module_name",i)):(this.$("#hustle-module-name-wrapper").addClass("sui-form-field-error"),this.$("#hustle-module-name-error").show())},disableButtonsOnSave:function(e){"draft"===e?this.$("#hustle-draft-button").addClass("sui-button-onload"):"publish"===e&&this.$(".hustle-publish-button").addClass("sui-button-onload"),this.$(".hustle-action-save").prop("disabled",!0),this.$(".wpmudev-button-navigation").prop("disabled",!0)},enableSaveButtons:function(){this.$(".sui-button-onload").removeClass("sui-button-onload"),this.$(".hustle-action-save").prop("disabled",!1),this.$(".wpmudev-button-navigation").prop("disabled",!1)},switchStatusTo:function(e){"saved"===e?(this.$el.find("#hustle-unsaved-changes-status").addClass("sui-hidden"),this.$el.find("#hustle-saved-changes-status").removeClass("sui-hidden")):(this.$el.find("#hustle-unsaved-changes-status").removeClass("sui-hidden"),this.$el.find("#hustle-saved-changes-status").addClass("sui-hidden"))},updateViewOnActiveChange:function(){var e=this.model.get("active"),t="1"===e?optinVars.messages.commons.published:optinVars.messages.commons.draft,i="1"===e?optinVars.messages.commons.unpublish:optinVars.messages.commons.save_draft,s="1"===e?optinVars.messages.commons.save_changes:optinVars.messages.commons.publish;this.$el.find(".sui-status-module .sui-tag").text(t),this.$el.find("#hustle-draft-button .button-text").text(i),this.$el.find(".hustle-publish-button .button-text").text(s)},publishingFlow:function(t){var i=e("#hustle-dialog--publish-flow"),s=i.find(".sui-dialog-content > .sui-box"),n=i.find("#dialogIcon"),a=i.find("#dialogTitle"),o=i.find("#dialogDescription"),l=i.find(".sui-dialog-close"),r=i.find(".sui-dialog-overlay");function d(){n.removeClass("sui-icon-"+s.data("ready-icon")),n.addClass("sui-icon-"+s.data("loading-icon")),"loader"===s.attr("data-loading-icon")&&n.addClass("sui-loading"),a.text(s.data("loading-title")),o.text(s.data("loading-desc")),l.hide()}function u(){SUI.dialogs["hustle-dialog--publish-flow"].hide(),setTimeout(function(){d()},500)}"loading"===t&&(d(),SUI.dialogs["hustle-dialog--publish-flow"].show()),"ready"===t&&(n.removeClass("sui-icon-"+s.data("loading-icon")),n.addClass("sui-icon-"+s.data("ready-icon")),"loader"===s.attr("data-loading-icon")&&n.removeClass("sui-loading"),a.text(s.data("ready-title")),o.text(s.data("ready-desc")),l.show(),a.focus(),r.on("click",function(){u()}),l.on("click",function(){u()}))},removeErrorMessage:function(t){if(t.target.value){var i=e(t.target).parent(".sui-form-field");i.removeClass("sui-form-field-error"),i.find(".sui-error-message").hide()}},previewModule:function(t){t.preventDefault(),this.setContentFromTinymce(!0),this.sanitizeData();var i=e(t.currentTarget),s=this.model.get("module_id"),n=this.model.get("module_type"),a=_.extend({},this.model.toJSON(),this.getDataToSave());i.addClass("sui-button-onload"),Module.preview.open(s,n,a)}}}),function(e){"use strict";var t;Optin.View.Conditions=Optin.View.Conditions||{},t=Hustle.View.extend({conditionId:"",className:"sui-builder-field sui-accordion-item sui-accordion-item--open",_template:Optin.template("hustle-visibility-rule-tpl"),template:!1,_defaults:{typeName:"",conditionName:""},_events:{"change input":"changeInput","change textarea":"changeInput","change select":"changeInput"},init:function(t){return this.undelegateEvents(),this.$el.removeData().unbind(),this.type=t.type,this.groupId=t.groupId,this.filter_type=t.filter_type,this.id=this.conditionId,this.template=void 0!==this.cpt?Optin.template("hustle-visibility-rule-tpl--post_type"):Optin.template("hustle-visibility-rule-tpl--"+this.conditionId),this._defaults={typeName:optinVars.messages.settings[this.type]?optinVars.messages.settings[this.type]:this.type,conditionName:optinVars.messages.conditions[this.conditionId]?optinVars.messages.conditions[this.conditionId]:this.conditionId,groupId:this.groupId,id:this.conditionId,source:t.source},this.data=this.getData(),this.render(),this.events=e.extend(!0,{},this.events,this._events),this.delegateEvents(),this.onInit&&_.isFunction(this.onInit)&&this.onInit.apply(this,arguments),this},getData:function(){return _.extend({},this._defaults,this.defaults(),this.model.get(this.conditionId),{type:this.type})},getTitle:function(){return this.title.replace("{type_name}",this.data.typeName)},getBody:function(){return"function"==typeof this.body?this.body.apply(this,arguments):this.body.replace("{type_name}",this.data.typeName)},getHeader:function(){return this.header},countLines:function(e){return e.replace(/\s+$/g,"").split("\n").length},render:function(){this.setProperties();var t=this._template(_.extend({},{title:this.getTitle(),body:this.getBody(),header:this.getHeader()},this._defaults,{type:this.type}));return this.$el.html(""),this.$el.html(t),e(".wph-conditions--box .wph-conditions--item:not(:last-child)").removeClass("wph-conditions--open").addClass("wph-conditions--closed"),e(".wph-conditions--box .wph-conditions--item:not(:last-child) section").hide(),this.rendered&&"function"==typeof this.rendered&&this.rendered.apply(this,arguments),this},updateAttribute:function(e,t){this.data=this.model.get(this.conditionId),this.data[e]=t,this.model.set(this.conditionId,this.data),this.model.trigger("change")},getAttribute:function(e){var t=this.model.get(this.conditionId);return!(!t||!t[e])&&t[e]},refreshLabel:function(){var e=this.getHeader();this.$el.find(".wph-condition--preview").html(""),this.$el.find(".sui-accordion-item-header .sui-tag").html(e)},changeInput:function(t){var i,s=t.target,n=s.getAttribute("data-attribute"),a=e(s),o=a.is(".sui-select")?a.val():t.target.value;return t.stopImmediatePropagation(),a.is(":checkbox")&&(o=a.is(":checked")),!a.is(".select2-search__field")&&(i=this.updateAttribute(n,o),this.refreshLabel(),i)},getConfigs:function(){return this.defaults()||!0}});var i=function(t){e(".wph-conditions--items").data("select2ScrollPosition",{})},s=function(t){var i=["all"];t.params&&t.params.args&&t.params.args.data&&t.params.args.data.id&&"all"===t.params.args.data.id||((i=e(this).val())&&-1!==i.indexOf("all")?i.splice(i.indexOf("all"),1):i=(i||[]).concat([t.params.args.data.id]),i&&i.length||(i=[t.params.args.data.id])),e(this).val(i).trigger("change")},n={events:{'change input[type="radio"]':"setCurrentLi"},setCurrentLi:function(t){var i=e(t.target),s=i.closest("li");s.siblings().removeClass("current"),s.toggleClass("current",i.is(":checked"))}};Optin.View.Conditions.posts=t.extend(_.extend({},n,{conditionId:"posts",setProperties:function(){this.title=optinVars.messages.conditions.posts},defaults:function(){return{filter_type:"except",posts:[]}},onInit:function(){},getHeader:function(){return _.contains(this.getAttribute("posts"),"all")?"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.all:optinVars.messages.condition_labels.none:this.getAttribute("posts").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("posts").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body:function(){return this.template(this.getData())},rendered:function(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:function(e){return{action:"get_new_condition_ids",search:e.term,postType:"post"}},processResults:function(e){return{results:e.data}},cache:!0},createTag:function(){return!1}}).on("select2:selecting",s).on("select2:selecting",i).on("select2:unselecting",i)}})),Optin.View.Conditions.pages=t.extend(_.extend({},n,{conditionId:"pages",setProperties:function(){this.title=optinVars.messages.conditions.pages},defaults:function(){return{filter_type:"except",pages:[]}},onInit:function(){},getHeader:function(){return _.contains(this.getAttribute("pages"),"all")?"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.all:optinVars.messages.condition_labels.none:this.getAttribute("pages").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("pages").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body:function(){return this.template(this.getData())},rendered:function(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:function(e){return{action:"get_new_condition_ids",search:e.term,postType:"page"}},processResults:function(e){return{results:e.data}},cache:!0},createTag:function(){return!1}}).on("select2:selecting",s).on("select2:selecting",i).on("select2:unselecting",i)}})),optinVars.post_types&&_.each(optinVars.post_types,function(e,a){Optin.View.Conditions[e.name]=t.extend(_.extend({},n,{conditionId:e.name,cpt:!0,setProperties:function(){this.title=e.label},defaults:function(){return{filter_type:"except",selected_cpts:[],postType:a,postTypeLabel:e.label}},getHeader:function(){return this.getAttribute("selected_cpts").length&&!_.contains(this.getAttribute("selected_cpts"),"all")?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("selected_cpts").length):_.contains(this.getAttribute("selected_cpts"),"all")?"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.any:optinVars.messages.condition_labels.none:"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.any},body:function(){return this.template(this.getData())},rendered:function(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:function(e){return{action:"get_new_condition_ids",search:e.term,postType:a}},processResults:function(e){return{results:e.data}},cache:!0},createTag:function(){return!1}}).on("select2:selecting",s).on("select2:selecting",i).on("select2:unselecting",i)}}))}),Optin.View.Conditions.categories=t.extend(_.extend({},n,{conditionId:"categories",setProperties:function(){this.title=optinVars.messages.conditions.categories},defaults:function(){return{filter_type:"except",categories:[]}},onInit:function(){},getHeader:function(){return _.contains(this.getAttribute("categories"),"all")?"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.all:optinVars.messages.condition_labels.none:this.getAttribute("categories").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("categories").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body:function(){return this.template(this.getData())},rendered:function(){this.$(".hustle-select-ajax").SUIselect2({tags:"true",width:"100%",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:function(e){return{action:"get_new_condition_ids",search:e.term,postType:"category"}},processResults:function(e){return{results:e.data}},cache:!0},createTag:function(){return!1}}).on("select2:selecting",i).on("select2:unselecting",i)}})),Optin.View.Conditions.tags=t.extend(_.extend({},n,{conditionId:"tags",setProperties:function(){this.title=optinVars.messages.conditions.tags},defaults:function(){return{filter_type:"except",tags:[]}},onInit:function(){},getHeader:function(){return _.contains(this.getAttribute("tags"),"all")?"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.all:optinVars.messages.condition_labels.none:this.getAttribute("tags").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("tags").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.all},body:function(){return this.template(this.getData())},rendered:function(){this.$(".hustle-select-ajax").SUIselect2({width:"100%",tags:"true",dropdownCssClass:"sui-select-dropdown",ajax:{url:ajaxurl,delay:250,dataType:"json",type:"POST",data:function(e){return{action:"get_new_condition_ids",search:e.term,postType:"tag"}},processResults:function(e){return{results:e.data}},cache:!0},createTag:function(){return!1}}).on("select2:selecting",i).on("select2:unselecting",i)}})),Optin.View.Conditions.visitor_logged_in_status=t.extend({conditionId:"visitor_logged_in_status",setProperties:function(){this.title=optinVars.messages.conditions.visitor_logged_in},defaults:function(){return{show_to:"logged_in"}},getHeader:function(){return this.getAttribute("show_to").length&&"logged_out"===this.getAttribute("show_to")?optinVars.messages.condition_labels.logged_out:optinVars.messages.condition_labels.logged_in},body:function(){return this.template(this.getData())}}),Optin.View.Conditions.shown_less_than=t.extend({conditionId:"shown_less_than",setProperties:function(){this.title=optinVars.messages.conditions.shown_less_than},defaults:function(){return{less_than:""}},getHeader:function(){return 0<this.getAttribute("less_than")?optinVars.messages.condition_labels.number_views.replace("{number}",this.getAttribute("less_than")):optinVars.messages.condition_labels.any},body:function(){return this.template(this.getData())}}),Optin.View.Conditions.visitor_device=t.extend({conditionId:"visitor_device",setProperties:function(){this.title=optinVars.messages.conditions.only_on_mobile},defaults:function(){return{filter_type:"mobile"}},getHeader:function(){return"not_mobile"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.desktop_only:optinVars.messages.condition_labels.mobile_only},body:function(){return this.template(this.getData())}}),Optin.View.Conditions.from_referrer=t.extend({conditionId:"from_referrer",disable:["from_referrer"],setProperties:function(){this.title=optinVars.messages.conditions.from_specific_ref},defaults:function(){return{filter_type:"true",refs:""}},getHeader:function(){var e=0;return this.getAttribute("refs").length&&(e=this.countLines(this.getAttribute("refs"))),e?("false"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.except_these:optinVars.messages.condition_labels.only_these).replace("{number}",e):"false"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.any:optinVars.messages.condition_labels.none},body:function(){return this.template(this.getData())}}),Optin.View.Conditions.source_of_arrival=t.extend({conditionId:"source_of_arrival",setProperties:function(){this.title=optinVars.messages.conditions.from_search_engine},defaults:function(){return{source_external:"false",source_search:"false"}},getHeader:function(){var e=0;return _.isTrue(this.getAttribute("source_external"))&&e++,_.isTrue(this.getAttribute("source_search"))&&e++,e?optinVars.messages.condition_labels.any_conditions.replace("{number}",e):optinVars.messages.condition_labels.any},body:function(){return this.template(this.getData())}}),Optin.View.Conditions.on_url=t.extend({conditionId:"on_url",setProperties:function(){this.title=optinVars.messages.conditions.on_specific_url},defaults:function(){return{filter_type:"except",urls:""}},getHeader:function(){var e=0;return this.getAttribute("urls").length&&(e=this.countLines(this.getAttribute("urls"))),e?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",e):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.any},body:function(){return this.template(this.getData())}}),Optin.View.Conditions.visitor_commented=t.extend({conditionId:"visitor_commented",setProperties:function(){this.title=optinVars.messages.conditions.visitor_has_never_commented},defaults:function(){return{filter_type:"true"}},getHeader:function(){return"false"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.false:optinVars.messages.condition_labels.true},body:function(){return this.template(this.getData())}}),Optin.View.Conditions.user_roles=t.extend({conditionId:"user_roles",setProperties:function(){this.title=optinVars.messages.conditions.on_specific_roles},defaults:function(){return{roles:"",filter_type:"except"}},getHeader:function(){return this.getAttribute("roles").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("roles").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.any},body:function(){return this.template(this.getData())},rendered:function(){this.$(".sui-select").val(this.getAttribute("roles")).SUIselect2().on("select2:selecting",i).on("select2:unselecting",i)}}),Optin.View.Conditions.page_templates=t.extend({conditionId:"page_templates",setProperties:function(){this.title=optinVars.messages.conditions.on_specific_templates},defaults:function(){return{templates:"",filter_type:"except"}},getHeader:function(){return this.getAttribute("roles").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("templates").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.any},body:function(){return this.template(this.getData())},rendered:function(){this.$(".sui-select").val(this.getAttribute("templates")).SUIselect2().on("select2:selecting",i).on("select2:unselecting",i)}}),Optin.View.Conditions.user_registration=t.extend({conditionId:"user_registration",setProperties:function(){this.title=optinVars.messages.conditions.user_registration},defaults:function(){return{from_date:0,to_date:0}},getHeader:function(){if(0<=this.getAttribute("from_date")&&!1!==this.getAttribute("from_date")){var e=optinVars.messages.condition_labels.from_reg_date.replace("{number}",this.getAttribute("from_date"));return 0<this.getAttribute("to_date")?(e+optinVars.messages.condition_labels.to_reg_date).replace("{number}",this.getAttribute("to_date")):e}return optinVars.messages.condition_labels.after_registration},body:function(){return this.template(this.getData())}}),Optin.View.Conditions.visitor_country=t.extend({conditionId:"visitor_country",setProperties:function(){this.title=optinVars.messages.conditions.not_in_a_country},defaults:function(){return{countries:"",filter_type:"except"}},getHeader:function(){return this.getAttribute("countries").length?("only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.only_these:optinVars.messages.condition_labels.except_these).replace("{number}",this.getAttribute("countries").length):"only"===this.getAttribute("filter_type")?optinVars.messages.condition_labels.none:optinVars.messages.condition_labels.any},body:function(){return this.template(this.getData())},rendered:function(){this.$(".sui-select").val(this.getAttribute("countries")).SUIselect2().on("select2:selecting",i).on("select2:unselecting",i)}}),Optin.View.Conditions.page_404=t.extend({conditionId:"page_404",setProperties:function(){this.title=optinVars.messages.conditions.page_404},defaults:function(){return{show:"true"}},body:function(){return this.template(this.getData())},rendered:function(){this.$(".sui-tag").remove()}})}(jQuery),Hustle.define("Settings.Accessibility_Settings",function(e){"use strict";return Backbone.View.extend({el:"#accessibility-box",data:{},events:{"click .hustle-settings-save":"save"},initialize:function(){},save:function(t){var i=e(t.target),s={accessibility_color:e('input[name="hustle-accessibility-color"]',this.el).prop("checked")},n=i.data("nonce");return t.preventDefault(),i.prop("disabled",!0),i.addClass("sui-button-onload"),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"hustle_save_settings",target:"accessibility",data:s,_ajax_nonce:n},success:function(e){e.success?location.reload():(i.prop("disabled",!1),i.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong))},error:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}}),!1}})}),Hustle.define("Settings.Palettes",function(e){"use strict";return Backbone.View.extend({el:"#palettes-box",events:{"click .hustle-create-palette":"openCreatePaletteModal","click .hustle-delete-button":"openDeletePaletteModal","click .hustle-button-delete":"delettePalette"},initialize:function(){var e=Hustle.get("Settings.Palettes_Modal");this.paletteModal=new e},openCreatePaletteModal:function(e){this.paletteModal.open(e)},openDeletePaletteModal:function(t){t.preventDefault();var i=e(t.currentTarget),s={id:i.data("id"),title:i.data("title"),description:i.data("description"),action:"delete",nonce:i.data("nonce"),actionClass:"hustle-button-delete"};Module.deleteModal.open(s),e(".hustle-button-delete").on("click",e.proxy(this.delettePalette,this))},delettePalette:function(t){t.preventDefault();var i=e(t.currentTarget),s=i.data("form-id"),n=i.data(),a=e("#"+s),o=new FormData(a[0]);e.each(n,function(e,t){return o.append(e,t)}),o.append("_ajax_nonce",optinVars.settings_palettes_action_nonce),o.append("action","hustle_handle_palette_actions"),e.ajax({url:ajaxurl,type:"POST",data:o,contentType:!1,processData:!1}).done(function(t){t.data.url?location.replace(t.data.url):t.data.notification&&Module.Notification.open(t.data.notification.status,t.data.notification.message,t.data.notification.delay),t.data.url||e(".sui-button-onload").removeClass("sui-button-onload")}).error(function(){Module.Notification.open("error",optinVars.messages.commons.generic_ajax_error),e(".sui-button-onload").removeClass("sui-button-onload")})}})}),Hustle.define("Settings.Dashboard_Analytics_View",function(e,t,i){"use strict";return Backbone.View.extend({el:"#analytics-box",events:{"click .hustle-settings-save-analytics":"save"},initialize:function(){},save:function(t){var i=e(t.target),s=i.closest("form").data("nonce"),n={title:e("input[name=title]",this.el).val(),role:e("select[name=role]",this.el).val(),modules:[]};return t.preventDefault(),i.prop("disabled",!0),i.addClass("sui-button-onload"),_.isUndefined(i.data("enabled"))||(n.enabled=i.data("enabled")),e('input[name="modules[]"]',this.el).each(function(){e(this).is(":checked")&&n.modules.push(e(this).val())}),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"hustle_save_settings",target:"analytics",data:n,_ajax_nonce:s},success:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),e.success?e.data.reload?location.reload():Module.Notification.open("success",optinVars.messages.settings_saved):Module.Notification.open("error",optinVars.messages.something_went_wrong)},error:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}}),!1}})}),Hustle.define("Settings.Data_Settings",function(e){"use strict";return Backbone.View.extend({el:"#data-box",data:{},events:{"click .hustle-settings-save":"save","click #hustle-dialog-open--reset-data-settings":"dataDialog","click .sui-dialog-content #hustle-reset-settings":"settingsReset"},initialize:function(){},dataDialog:function(t){var i=this.$(t.target),s=e("#hustle-dialog--reset-data-settings"),n=s.find("#dialogTitle"),a=s.find("#dialogDescription");n.text(i.data("dialog-title")),a.text(i.data("dialog-info")),SUI.dialogs["hustle-dialog--reset-data-settings"].show(),t.preventDefault()},settingsReset:function(t){var i=this.$(t.target),s=i.closest(".sui-dialog"),n=s.find("button, .sui-button");n.prop("disabled",!0),i.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:{action:"hustle_reset_settings",_ajax_nonce:i.data("nonce")},success:function(){e("#"+i.data("notice")).show(),SUI.dialogs[s.attr("id")].hide(),i.removeClass("sui-button-onload"),n.prop("disabled",!1),Module.Notification.open("success",optinVars.messages.settings_was_reset),window.setTimeout(function(){return location.reload(!0)},2e3)},error:function(){SUI.dialogs[s.attr("id")].hide(),i.removeClass("sui-button-onload"),n.prop("disabled",!1),Module.Notification.open("error",optinVars.messages.something_went_wrong)}})},save:function(t){var i=e(t.target),s={reset_settings_uninstall:e('input[name="reset_settings_uninstall"]:checked',this.el).val()},n=i.data("nonce");return t.preventDefault(),i.prop("disabled",!0),i.addClass("sui-button-onload"),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"hustle_save_settings",target:"data",data:s,_ajax_nonce:n},success:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),e.success?Module.Notification.open("success",optinVars.messages.settings_saved):Module.Notification.open("error",optinVars.messages.something_went_wrong)},error:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}}),!1}})}),Hustle.define("Settings.General_Settings",function(e){"use strict";return Backbone.View.extend({el:"#general-box",data:{},events:{"click .hustle-settings-save":"save","change input[type=number]":"changeValue","change input[type=checkbox]":"changeValue","change input[type=text]":"changeValue","change input[type=email]":"changeValue"},initialize:function(){},changeValue:function(t){var i=e(t.currentTarget),s=i.val(),n=i.attr("name");i.is(":checkbox")&&(s=i.prop("checked")?"1":"0"),this.data[n]=s},save:function(t){var i=e(t.target),s=i.data("nonce");if(t.preventDefault(),0!==this.data.length)return i.prop("disabled",!0),i.addClass("sui-button-onload"),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"hustle_save_settings",target:"general",data:this.data,_ajax_nonce:s},success:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),e.success?Module.Notification.open("success",optinVars.messages.settings_saved):Module.Notification.open("error",optinVars.messages.something_went_wrong)},error:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}}),!1}})}),Hustle.define("Settings.Palettes_Modal",function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--edit-palette",events:{"click .hustle-button-action":"handleAction","click .hustle-cancel-palette":"closeCreatePaletteModal","change #hustle-palette-module-type":"updateModulesOptions"},initialize:function(){},open:function(t){void 0!==e(t.currentTarget).data("slug")?this.handleAction(t):(this.$("#hustle-palette-module-type").trigger("change"),SUI.openModal("hustle-dialog--edit-palette",t.currentTarget,"hustle-palette-name",!1))},handleAction:function(t){t.preventDefault();var i=this,s=e(t.currentTarget),n=s.data("form-id"),a=s.data();s.addClass("sui-button-onload"),Module.Utils.accessibleHide(this.$(".sui-error-message"));var o=new FormData,l=!1;if(void 0!==n){var r=e("#"+n);r.length&&(o=new FormData(r[0]),r.find(".hustle-required-field").each(function(t,i){var s=e(i);if(!s.val().trim().length){var n=s.data("error-message"),a=s.siblings(".sui-error-message");a.html(n),Module.Utils.accessibleShow(a),l=!0}}))}l?e(".sui-button-onload").removeClass("sui-button-onload"):(e.each(a,function(e,t){return o.append(e,t)}),o.append("_ajax_nonce",optinVars.settings_palettes_action_nonce),o.append("action","hustle_handle_palette_actions"),e.ajax({url:ajaxurl,type:"POST",data:o,contentType:!1,processData:!1}).done(function(s){s.data.callback&&"function"==typeof i[s.data.callback]?i[s.data.callback](s.data,s.success,t):s.data.url?location.replace(s.data.url):s.data.notification&&Module.Notification.open(s.data.notification.status,s.data.notification.message,s.data.notification.delay),s.data.url||e(".sui-button-onload").removeClass("sui-button-onload")}).error(function(t){e(".sui-button-onload").removeClass("sui-button-onload")}))},actionOpenEditPalette:function(t,i,s){this.actionGoToSecondStep(t),SUI.openModal("hustle-dialog--edit-palette",s.currentTarget,"hustle-palette-name",!1),t.palette_data.name&&e("#hustle-dialog--edit-palette").find("#hustle-palette-name").val(t.palette_data.name)},actionGoToSecondStep:function(e){var t=this.$("#hustle-edit-palette-first-step"),i=this.$("#hustle-edit-palette-second-step"),s=this.$(".hustle-button-action"),n=e.palette_data,a=Optin.template("hustle-dialog--edit-palette-tpl");Module.Utils.accessibleHide(t,!0),i.html(a(n)),this.initiateSecondStepElements(),Module.Utils.accessibleShow(i,!0),i.focus(),s.data("step",3),s.addClass("sui-button-blue"),Module.Utils.accessibleHide(s.find("#hustle-step-button-text")),Module.Utils.accessibleShow(s.find("#hustle-finish-button-text"))},initiateSecondStepElements:function(){this.$(".sui-accordion").each(function(){SUI.suiAccordion(this)}),SUI.suiTabs(),SUI.tabs(),this.createPickers()},closeCreatePaletteModal:function(){var e=this.$("#hustle-edit-palette-first-step"),t=this.$("#hustle-edit-palette-second-step"),i=this.$(".hustle-button-action");SUI.closeModal(),setTimeout(function(){Module.Utils.accessibleHide(this.$(".sui-error-message")),Module.Utils.accessibleHide(t,!0),t.html(""),Module.Utils.accessibleShow(e,!0),i.removeClass("sui-button-blue"),i.data("step",2),Module.Utils.accessibleShow(i.find("#hustle-step-button-text")),Module.Utils.accessibleHide(i.find("#hustle-finish-button-text"))},500)},createPickers:function(){var t=this.$(".sui-colorpicker-input");t.wpColorPicker({change:function(t,i){var s=e(this);s.val()!==i.color.toCSS()&&s.val(i.color.toCSS()).trigger("change")},palettes:["#333333","#FFFFFF","#17A8E3","#E1F6FF","#666666","#AAAAAA","#E6E6E6"]}),t.hasClass("wp-color-picker")&&t.each(function(){var t=e(this),i=t.closest(".sui-colorpicker-wrap"),s=i.find(".sui-colorpicker-value span[role=button]"),n=i.find(".sui-colorpicker-value"),a=n.find("button"),o="hex",l=t.closest(".wp-picker-container"),r=l.find(".wp-color-result"),d=r.find(".color-alpha"),u=l.find(".wp-picker-clear");!0===t.data("alpha")?(o="rgba",t.bind("change",function(){s.find("span").css({"background-color":d.css("background")}),n.find("input").val(t.val())})):t.bind("change",function(){s.find("span").css({"background-color":r.css("background-color")}),n.find("input").val(t.val())}),i.find(".sui-colorpicker").addClass("sui-colorpicker-"+o),i.find(".sui-button, span[role=button]").on("click",function(e){r.click(),e.preventDefault(),e.stopPropagation()}),a.on("click",function(i){var a=t.data("attribute"),o=e("#hustle-palette-module-fallback").val(),l=optinVars.palettes[o][a];u.click(),n.find("input").val(l),t.val(l).trigger("change"),s.find("span").css({"background-color":l}),i.preventDefault(),i.stopPropagation()})})},updateModulesOptions:function(t){var i=e(t.currentTarget).val(),s=this.$("#hustle-palette-module-name"),n="";e.each(optinVars.current[i],function(e,t){n+='<option value="'.concat(e,'">').concat(t,"</option>")}),s.html(n),this.$(".sui-select:not(.hustle-select-ajax)").SUIselect2({dropdownCssClass:"sui-select-dropdown"})}})}),Hustle.define("Settings.Permissions_View",function(e,t,i){"use strict";return Backbone.View.extend({el:"#permissions-box",data:{},events:{"click .hustle-settings-save":"save","change select":"changeValue"},initialize:function(){e(function(){function t(){e(".select2-selection__rendered li:first-child .select2-selection__choice__remove").off("click").text("").on("click",function(e){e.stopImmediatePropagation(),e.preventDefault()})}e("select").on("change.select2",function(e){t()}),t()})},changeValue:function(t){var i=e(t.currentTarget).val(),s=e(t.currentTarget).data("index");this.data[s]=i},save:function(t){var i=e(t.target),s=i.data("nonce");if(t.preventDefault(),0!==this.data.length)return i.prop("disabled",!0),i.addClass("sui-button-onload"),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"hustle_save_settings",target:"permissions",data:this.data,_ajax_nonce:s},success:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),e.success?Module.Notification.open("success",optinVars.messages.settings_saved):Module.Notification.open("error",optinVars.messages.something_went_wrong)},error:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}}),!1}})}),Hustle.define("Settings.Privacy_Settings",function(e){"use strict";return Backbone.View.extend({el:"#privacy-box",data:{},events:{"click .hustle-settings-save":"save","click #hustle-dialog-open--delete-ips":"openDeleteIpsDialog"},initialize:function(){e("#hustle-delete-ips-submit").on("click",this.handleIpDeletion)},save:function(t){var i=e(t.target),s=this.$("#hustle-privacy-settings-form"),n=new FormData(s[0]),a=i.data("nonce");return n.append("_ajax_nonce",a),n.append("action","hustle_save_settings"),n.append("target","privacy"),t.preventDefault(),i.prop("disabled",!0),i.addClass("sui-button-onload"),e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:n,contentType:!1,processData:!1,success:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),e.success?Module.Notification.open("success",optinVars.messages.settings_saved):Module.Notification.open("error",optinVars.messages.something_went_wrong)},error:function(e){i.prop("disabled",!1),i.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}}),!1},openDeleteIpsDialog:function(e){SUI.dialogs["hustle-dialog--delete-ips"].show(),e.preventDefault()},handleIpDeletion:function(t){t.preventDefault();var i=e(t.currentTarget),s=i.closest(".sui-dialog"),n=e("#"+i.data("formId")),a=new FormData(n[0]);a.append("action","hustle_remove_ips"),a.append("_ajax_nonce",i.data("nonce")),i.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:a,contentType:!1,processData:!1,success:function(t){Module.Notification.open("success",t.data.message),SUI.dialogs[s.attr("id")].hide(),e(".sui-button-onload").removeClass("sui-button-onload")},error:function(){SUI.dialogs[s.attr("id")].hide(),e(".sui-button-onload").removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}})}})}),Hustle.define("Settings.reCaptcha_Settings",function(e){"use strict";return Backbone.View.extend({el:"#recaptcha-box",data:{},events:{"submit #hustle-settings-recaptcha-form":"save"},initialize:function(){this.maybeRenderRecaptchas()},maybeRenderRecaptchas:function(){for(var t=this,i=this,s=!1,n=function(){var n=o[a],l=t.$("#hustle-modal-recaptcha-".concat(n,"-0")),r=t.$('input[name="'.concat(n,'_site_key"]')).val().trim(),d=t.$('input[name="'.concat(n,'_secret_key"]')).val().trim();r&&d?(l.data("sitekey",r),s?HUI.maybeRenderRecaptcha(l.closest(".sui-form-field")):e.ajax({url:ajaxurl,type:"POST",data:{action:"hustle_load_recaptcha_preview"}}).done(function(e){e.success&&(s=!0,i.$("#hustle-recaptcha-script-container").html(e.data),setTimeout(function(){return HUI.maybeRenderRecaptcha(l.closest(".sui-form-field"))},1e3))}),t.$(".hustle-recaptcha-".concat(n,"-preview-notice")).hide(),l.show()):(t.$(".hustle-recaptcha-".concat(n,"-preview-notice")).show(),l.hide())},a=0,o=["v2_checkbox","v2_invisible","v3_recaptcha"];a<o.length;a++)n()},save:function(t){t.preventDefault();var i=this,s=e(t.target),n=this.$(".hustle-settings-save"),a=new FormData(s[0]),o=n.data("nonce");return a.append("action","hustle_save_settings"),a.append("target","recaptcha"),a.append("_ajax_nonce",o),n.prop("disabled",!0),n.addClass("sui-button-onload"),e.ajax({type:"POST",url:ajaxurl,contentType:!1,processData:!1,data:a,success:function(e){if(n.prop("disabled",!1),n.removeClass("sui-button-onload"),e.success){var t=e.data.message;Module.Notification.open("success",t)}else Module.Notification.open("error",optinVars.messages.something_went_wrong);i.maybeRenderRecaptchas()},error:function(e){n.prop("disabled",!1),n.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}}),!1}})}),Hustle.define("Settings.Top_Metrics_View",function(e,t,i){"use strict";return Backbone.View.extend({el:"#top-metrics-box",events:{"submit #top-metrics-form":"saveSettings","click #top-metrics-form .sui-checkbox input":"maybeDisableInputs"},initialize:function(){this.maybeDisableInputs()},saveSettings:function(t){var i=this.$(t.target),s=i.data("nonce"),n=new FormData(i[0]),a=i.find('button[type="submit"]');t.preventDefault(),a.prop("disabled",!0),a.addClass("sui-button-onload"),n.append("action","hustle_save_settings"),n.append("target","top_metrics"),n.append("_ajax_nonce",s),e.ajax({url:ajaxurl,type:"POST",contentType:!1,processData:!1,data:n,success:function(e){a.prop("disabled",!1),a.removeClass("sui-button-onload"),e.success?Module.Notification.open("success",optinVars.messages.settings_saved):Module.Notification.open("error",optinVars.messages.something_went_wrong)},error:function(e){a.prop("disabled",!1),a.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}})},maybeDisableInputs:function(){var e=this.$el.find("#top-metrics-form"),t=e.find("input:checked"),i=e.find("input:not(:checked)"),s=e.find('button[type="submit"]'),n=s.parent(),a=i.next("span");3<=t.length?(i.prop("disabled",!0),a.addClass("sui-tooltip"),a.css("opacity","1"),s.prop("disabled",!1),n.removeClass("sui-tooltip")):(s.prop("disabled",!0),i.prop("disabled",!1),a.removeClass("sui-tooltip"),a.css("opacity",""),n.addClass("sui-tooltip"))}})}),Hustle.define("Settings.Unsubscribe_View",function(e,t,i){"use strict";return Backbone.View.extend({el:"#unsubscribe-box",events:{"submit #unsubscribe-settings-form":"saveSettings"},initialize:function(){},saveSettings:function(t){var i=this.$(t.target),s=i.data("nonce"),n=i.serialize(),a=i.find('button[type="submit"]');t.preventDefault(),a.prop("disabled",!0),a.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:{action:"hustle_save_settings",target:"unsubscribe",data:n,_ajax_nonce:s},success:function(e){a.prop("disabled",!1),a.removeClass("sui-button-onload"),e.success?Module.Notification.open("success",optinVars.messages.settings_saved):Module.Notification.open("error",optinVars.messages.something_went_wrong)},error:function(e){$button.prop("disabled",!1),$button.removeClass("sui-button-onload"),Module.Notification.open("error",optinVars.messages.something_went_wrong)}})}})}),function(e,t){"use strict";e(document).on("click",".wpoi-listing-wrap header.can-open .toggle, .wpoi-listing-wrap header.can-open .toggle-label",function(e){e.stopPropagation()}),e(".accordion header .optin-delete-optin, .accordion header .edit-optin, .wpoi-optin-details tr .button-edit").hide().css({transition:"none"}),e(document).on({mouseenter:function(){e(this).find(".optin-delete-optin, .edit-optin").stop().fadeIn("fast")},mouseleave:function(){var t=e(this);t.find(".toggle-checkbox").removeProp("disabled"),t.find(".edit-optin").removeProp("disabled"),t.removeClass("disabled"),t.find(".optin-delete-optin, .edit-optin, .delete-optin-confirmation").stop().fadeOut("fast")}},".accordion header"),e(document).on({mouseenter:function(){e(this).find(".button-edit").stop().fadeIn("fast")},mouseleave:function(){e(this).find(".button-edit").stop().fadeOut("fast")}},".wpoi-optin-details tr"),e(document).on("click",".wpoi-tabs-menu a",function(t){var i=e(this).attr("tab");t.preventDefault(),Optin.router.navigate(i,!0)}),e(document).on("click",".edit-optin",function(t){t.stopPropagation(),t.preventDefault(),window.location.href=e(this).attr("href")}),e(document).on("click",".wpoi-type-edit-button",function(t){var i=e(this).data("id"),s=e(this).data("type");t.preventDefault(),window.location.href="admin.php?page=inc_optin&optin="+i+"#display/"+s}),e(document).on("click","*[for]",function(t){var i=e(this),s=i.attr("for"),n=e("#"+s);!i.is("label")&&n.length&&(n.trigger("change"),n.trigger("click"))}),e("#wpoi-complete-message").fadeIn(),e(document).on("click","#wpoi-complete-message .next-button button",function(t){e("#wpoi-complete-message").fadeOut()}),e(document).on("click",".wpoi-listing-page .wpoi-listing-wrap header.can-open",function(t){e(this).find(".open").trigger("click")}),e(document).on("click",".wpoi-listing-page .wpoi-listing-wrap .can-open .open",function(t){var i=e(this).closest(".wpoi-listing-wrap"),s=i.find("section"),n=e(".wpoi-listing-wrap").not(i),a=e(".wpoi-listing-wrap section").not(s);t.stopPropagation(),a.slideUp(300,function(){a.removeClass("open")}),n.find(".dev-icon").removeClass("dev-icon-caret_up").addClass("dev-icon-caret_down"),s.slideToggle(300,function(){i.toggleClass("open"),i.find(".dev-icon").toggleClass("dev-icon-caret_up dev-icon-caret_down")})}),Optin.decorateNumberInputs=function(t){var i=t&&t.$el?t.$el.find(".wph-input--number input"):e(".wph-input--number input"),s=Hustle.createTemplate('<div class="wph-nbr--nav"><div class="wph-nbr--button wph-nbr--up {{disabled}}">+</div><div class="wph-nbr--button wph-nbr--down {{disabled}}">-</div></div>');i.each(function(){var t=e(this),i=t.is(":disabled")?"disabled":"";t.siblings(".wph-nbr--nav").length||t.after(s({disabled:i}))})},Hustle.Events.on("view.rendered",Optin.decorateNumberInputs),e(document).on("click",".wph-nbr--up:not(.disabled)",function(t){var i,s=e(this).closest(".wph-input--number").find("input"),n=parseFloat(s.val());s.attr("min"),(i=n>=s.attr("max")?n:n+1)!==n&&s.val(i).trigger("change")}),e(document).on("click",".wph-nbr--down:not(.disabled)",function(t){var i,s=e(this).closest(".wph-input--number").find("input"),n=parseFloat(s.val()),a=s.attr("min");s.attr("max"),(i=n<=a?n:n-1)!==n&&s.val(i).trigger("change")}),function(){function t(){var t=e(window).scrollTop(),i=e(".wph-sticky--anchor");i.length&&(t>(i=i.offset().top)?(e(".wph-preview--eye").addClass("wph-sticky--element"),e(".wph-sticky--anchor").height(e(".wph-preview--eye").outerHeight())):(e(".wph-preview--eye").removeClass("wph-sticky--element"),e(".wph-sticky--anchor").height(0)))}e(function(){e(window).scroll(t),t()})}()}(jQuery,document),Hustle.define("Integration_Modal_Handler",function(e){"use strict";return Backbone.View.extend({events:{"click .hustle-provider-connect":"connectAddOn","click .hustle-provider-disconnect":"disconnectAddOn","click .hustle-provider-next":"submitNextStep","click .hustle-provider-back":"goPrevStep","click .hustle-refresh-email-lists":"refreshLists","click .hustle-provider-form-disconnect":"disconnectAddOnForm","click .hustle-provider-clear-radio-options":"clearRadioOptions","keypress .sui-dialog-content":"preventEnterKeyFromDoingThings","change select#group":"showInterests"},preventEnterKeyFromDoingThings:function(e){13===e.which&&(e.preventDefault(),this.$(".hustle-provider-connect").length?this.$(".hustle-provider-connect").trigger("click"):this.$(".hustle-provider-next").length&&this.$(".hustle-provider-next").trigger("click"))},initialize:function(e){return this.slug=e.slug,this.nonce=e.nonce,this.action=e.action,this.moduleId=e.moduleId,this.multi_id=e.multiId,this.globalMultiId=e.globalMultiId,this.step=0,this.next_step=!1,this.prev_step=!1,this.render()},render:function(){var e={};e.action=this.action,e._ajax_nonce=this.nonce,e.data={},e.data.slug=this.slug,e.data.step=this.step,e.data.current_step=this.step,this.moduleId&&(e.data.module_id=this.moduleId),this.multi_id&&(e.data.multi_id=this.multi_id),this.globalMultiId&&(e.data.global_multi_id=this.globalMultiId),this.request(e,!1,!0)},applyLoader:function(e){e.find(".sui-button:not(.disable-loader)").addClass("sui-button-onload")},resetLoader:function(e){e.find(".sui-button").removeClass("sui-button-onload")},request:function(t,i,s){var n=this;s&&(this.$el.find(".sui-box-body").addClass("sui-block-content-center").html('<p class="sui-loading-dialog" aria-label="Loading content"><i class="sui-icon-loader sui-loading" aria-hidden="true"></i></p>'),this.$el.find(".sui-box-footer").html(""),this.$el.find(".integration-header").html("")),this.applyLoader(this.$el),this.ajax=e.post({url:ajaxurl,type:"post",data:t}).done(function(e){if(e&&e.success){n.renderBody(e),n.renderFooter(e);var t=e.data.data;if(n.onRender(t),n.resetLoader(n.$el),(i||!_.isUndefined(t.is_close)&&t.is_close)&&n.close(n),n.$el.find(".hustle-provider-close").on("click",function(){n.close(n)}),!_.isUndefined(t.notification)&&!_.isUndefined(t.notification.type)&&!_.isUndefined(t.notification.text))Module.Notification.open(t.notification.type,t.notification.text);if("mailchimp"===n.slug){var s=n.$el.find("#group");s.length&&s.trigger("change")}}}),this.ajax.always(function(){n.$el.find(".sui-box-body").removeClass("sui-block-content-center"),n.$el.find(".sui-loading-dialog").remove()})},renderBody:function(t){this.$el.find(".sui-box-body").html(t.data.data.html);var i=this.$el.find(".sui-box-body .integration-header").remove();if(0<i.length&&this.$el.find(".integration-header").html(i.html()),e.trim(this.$el.find(".sui-box-body").html()).length){var s=this.$el.find(".sui-box-body").children(),n=!0;e.each(s,function(t,i){e(i).is(":hidden")||(n=!1)}),n?(this.$el.find(".sui-box-body").addClass("sui-hidden"),this.$el.find(".sui-box-footer").css("padding-top","")):(this.$el.find(".sui-box-body select").each(function(){SUI.suiSelect(this)}),this.$el.find(".sui-box-body .sui-notice").next().is('input[type="hidden"]')&&this.$el.find(".sui-box-body .sui-notice").css({"margin-bottom":"0"}))}else this.$el.find(".sui-box-body").addClass("sui-hidden"),this.$el.find(".sui-box-footer").css("padding-top","")},renderFooter:function(e){var t=this,i=e.data.data.buttons,s=t.$el.find(".sui-box-body"),n=t.$el.find(".sui-box-footer");t.$el.find(".sui-box-footer").removeClass("sui-hidden").removeClass("sui-hidden-important").removeClass("sui-box-footer-center").removeClass("sui-box-footer-right").html(""),_.each(i,function(e){t.$el.find(".sui-box-footer").append(e.markup)}),0===n.find(".sui-button").length?n.addClass("sui-hidden-important"):(s.find(".hustle-installation-error").length&&n.addClass("sui-hidden-important"),n.find(".sui-button").hasClass("sui-button-center")?n.addClass("sui-box-footer-center"):n.find(".sui-button").hasClass("sui-button-right")&&(n.find(".sui-button").hasClass("sui-button-left")||n.addClass("sui-box-footer-right")))},onRender:function(e){this.delegateEvents(),_.isUndefined(e.opt_in_provider_current_step)||(this.step=+e.opt_in_provider_current_step),_.isUndefined(e.opt_in_provider_has_next_step)||(this.next_step=e.opt_in_provider_has_next_step),_.isUndefined(e.opt_in_provider_has_prev_step)||(this.prev_step=e.opt_in_provider_has_prev_step),this.$el.find("select").each(function(){SUI.suiSelect(this)}),this.$el.find(".sui-select").SUIselect2({dropdownCssClass:"sui-select-dropdown"})},refreshLists:function(t){t.preventDefault(),t.stopPropagation();var i=e(t.currentTarget),s=this.moduleId,n=this.slug,a=e("#form_id").length?"forms":"lists",o=this.nonce;i.addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:{action:"hustle_refresh_email_lists",id:s,slug:n,type:a,_ajax_nonce:o}}).done(function(e){if(e.success&&void 0!==e.data.select){var t=i.siblings("select");t.next().remove(),t.remove(),i.before(e.data.select),i.siblings(".sui-select").SUIselect2({dropdownCssClass:"sui-select-dropdown"})}}).error(function(e){}).always(function(){i.removeClass("sui-button-onload")})},submitNextStep:function(t){var i={},s=this.$el.find("form"),n={slug:this.slug,step:this.getStep(),current_step:this.step},a=s.serialize();this.moduleId&&(n.module_id=this.moduleId),a=a+"&"+e.param(n),i.action=this.action,i._ajax_nonce=this.nonce,i.data=a,this.request(i,!1,!1)},goPrevStep:function(e){var t={},i={slug:this.slug,step:this.getPrevStep(),current_step:this.step};this.moduleId&&(i.module_id=this.moduleId),this.multi_id&&(i.multi_id=this.multi_id),t.action=this.action,t._ajax_nonce=this.nonce,t.data=i,this.request(t,!1,!1)},getStep:function(){return this.next_step?this.step+1:this.step},getPrevStep:function(){return this.prev_step?this.step-1:this.step},connectAddOn:function(){var t={},i=this.$el.find("form"),s={slug:this.slug,step:this.getStep(),current_step:this.step},n=i.serialize();this.moduleId&&(s.module_id=this.moduleId),this.multi_id&&(s.multi_id=this.multi_id),n=n+"&"+e.param(s),t.action=this.action,t._ajax_nonce=this.nonce,t.data=n,this.request(t,!1,!1)},disconnectAddOn:function(t){var i=this,s=this.$el.find(".sui-dialog-image img").attr("src"),n=this.$el.find("#dialogTitle2").html(),a={},o={},l={};e("hustle-dialog--remove-active-warning").val();a.action="hustle_provider_deactivate",a._ajax_nonce=this.nonce,a.data={},a.data.slug=this.slug,a.data.img=s,a.data.title=n,this.globalMultiId&&(a.data.global_multi_id=this.globalMultiId),o.action="hustle_provider_is_on_module",o._ajax_nonce=this.nonce,o.data={},o.data.slug=this.slug,o.data.globalMultiId=this.globalMultiId,this.$el.find(".sui-button:not(.disable-loader)").addClass("sui-button-onload"),e.ajax({url:ajaxurl,type:"POST",data:o,success:function(e){!0===e.success&&(l=e)},complete:function(){!0===l.success?Module.integrationsActiveRemove.open(l.data,a,i):i.request(a,!0,!1)}})},disconnectAddOnForm:function(t){var i={},s=e("#hustle-integrations-active-count").val(),n=e("#hustle-integrations-active-integrations").val();i.action="hustle_provider_form_deactivate",i._ajax_nonce=this.nonce,i.data={},i.data.slug=this.slug,i.data.module_id=this.moduleId,this.multi_id&&(i.data.multi_id=this.multi_id),1==s&&n===this.slug&&"local_list"!==this.slug?Module.integrationsAllRemove.open(i,this):1==s&&"local_list"===this.slug?Module.Notification.open("error",optinVars.messages.integraiton_required):this.request(i,!0,!1)},close:function(t){t.ajax.abort(),t.remove(),e("body").css("overflow","auto"),Hustle.Events.trigger("hustle:providers:reload")},clearRadioOptions:function(){this.$("input[type=radio]",this.$el).removeAttr("checked")},showInterests:function(t){var i=this,s=e(t.currentTarget),n=s.data("nonce"),a=s.val(),o={},l=i.$el.find("form"),r={slug:i.slug,group:a,module_id:i.moduleId},d=l.serialize();d=d+"&"+e.param(r),o.action="hustle_mailchimp_get_group_interests",o._ajax_nonce=n,o.data=d,i.applyLoader(i.$el),e.ajax({url:ajaxurl,type:"POST",data:o}).done(function(e){e.success&&(l.find(".sui-form-field").slice(1).remove(),l.find(".sui-form-field:first-child").after(e.data),i.$el.find(".sui-select").SUIselect2({dropdownCssClass:"sui-select-dropdown"}))}).error(function(e){}).always(function(){i.resetLoader(i.$el)})}})});var Module=window.Module||{};function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}Hustle.define("Model",function(e){"use strict";return Backbone.Model.extend({initialize:function(){this.on("change",this.userHasChange,this),Backbone.Model.prototype.initialize.apply(this,arguments)},userHasChange:function(){Module.hasChanges=!0,Hustle.Events.trigger("modules.view.switch_status","unsaved")}})}),Hustle.define("Models.M",function(){"use strict";return Hustle.get("Model").extend({toJSON:function(){var e,t=_.clone(this.attributes);for(e in t)(t[e]instanceof Backbone.Model||t[e]instanceof Backbone.Collection)&&(t[e]=t[e].toJSON());return t},set:function(e,t,i){var s,n,a;"string"==typeof e&&-1!==e.indexOf(".")?(s=e.split(".")[0],n=e.split(".")[1],(a=this.get(s))&&a instanceof Backbone.Model&&(a.set(n,t,i),this.trigger("change:"+e,e,t,i),this.trigger("change:"+s,e,t,i))):Backbone.Model.prototype.set.call(this,e,t,i)},get:function(e){var t,i;return"string"==typeof e&&-1!==e.indexOf(".")?(t=e.split(".")[0],i=e.split(".")[1],this.get(t).get(i)):Backbone.Model.prototype.get.call(this,e)}})}),Hustle.define("Models.Trigger",function(){"use strict";return Hustle.get("Model").extend({defaults:{trigger:"time",on_time_delay:0,on_time_unit:"seconds",on_scroll:"scrolled",on_scroll_page_percent:"20",on_scroll_css_selector:"",enable_on_click_element:"1",on_click_element:"",enable_on_click_shortcode:"1",on_exit_intent:"1",on_exit_intent_per_session:"1",on_exit_intent_delayed:"0",on_exit_intent_delayed_time:5,on_exit_intent_delayed_unit:"seconds",on_adblock:"0"}})}),Module.Model=Hustle.get("Models.M").extend({defaults:{module_name:"",moduleType:"popup",active:"0"}}),Hustle.define("Models.Module_Defaults",function(e,t,i){"use strict";return{visibilityDefaults:{defaults:{conditions:""},initialize:function(e){if(_.extend(this,e),!(this.get("conditions")instanceof Backbone.Model)){_.isEmpty(this.get("conditions"))&&_.isArray(this.get("conditions"))&&(this.conditions={});var t=Hustle.get("Model");this.set("conditions",new t(this.conditions),{silent:!0})}}},settingsDefaults:{defaults:{},initialize:function(e){_.extend(this,e);var t=Hustle.get("Models.Trigger");this.get("triggers")instanceof Backbone.Model||this.set("triggers",new t(this.triggers),{silent:!0})}}}}),function(e){"use strict";var t=window.Module||{};t.Notification={initialize:function(){e("#hustle-notification").length?(e("#hustle-notification").remove(),this.initialize()):e('<div role="alert" id="hustle-notification" class="sui-notice-top sui-notice-'+this.type+' sui-can-dismiss"><div class="sui-notice-content"><p>'+this.text+'</p></div><span class="sui-notice-dismiss" aria-hidden="true"><a role="button" href="#" aria-label="'+optinVars.messages.commons.dismiss+'" class="sui-icon-check"></a></span></div>').removeAttr("hidden").appendTo(e("main.sui-wrap")).slideDown()},open:function(t,i,s){var n=this;_.isUndefined(s)&&(s=4e3),void 0!==n.closeTimeout&&(window.clearTimeout(n.closeTimeout),delete n.closeTimeout,n.close()),this.type=t||"notice",this.text=i,this.initialize();var a=e("#hustle-notification");a.removeClass("sui-hidden"),a.removeProp("hidden"),e(".sui-notice-dismiss a").click(function(e){return e.preventDefault(),n.close(),!1}),s&&(this.closeTimeout=setTimeout(function(){n.close()},s))},close:function(){var t=e("#hustle-notification");t.addClass("sui-hidden"),t.prop("hidden",!0),t.stop().slideUp("slow")}},t.integrationsModal={$popup:{},_deferred:{},open:function(t){var i=this,s=e(t.target);e("#hustle-integration-popup").remove(),s.hasClass("connect-integration")||(s=s.closest(".connect-integration"));var n=function(){return i.close(),!1},a=s.data("nonce"),o=s.data("slug"),l=s.data("title"),r=s.data("image"),d=s.data("action"),u=s.data("module_id"),c=s.data("multi_id"),h=s.data("global_multi_id"),p=Optin.template("hustle-integration-dialog-tpl");return e("main.sui-wrap").append(p({image:r,title:l})),this.$popup=e("#hustle-integration-dialog"),new(Hustle.get("Integration_Modal_Handler"))({slug:o,nonce:a,action:d,moduleId:u,multiId:c,globalMultiId:h,el:this.$popup}).on("modal:closed",function(){return i.close()}),this.$popup.find(".hustle-popup-action").remove(),this.$popup.find(".sui-dialog-close").on("click",n),this.$popup.find(".sui-dialog-overlay").on("click",n),this.$popup.on("click",".hustle-popup-cancel",n),this.$popup.find(".sui-dialog-overlay").on("click",function(){e(this).parent("#hustle-integration-dialog").find(".sui-dialog-close").trigger("click")}),this.$popup.find(".sui-dialog-overlay").removeClass("sui-fade-out").addClass("sui-fade-in"),this.$popup.find(".sui-dialog-content").removeClass("sui-bounce-out").addClass("sui-bounce-in"),this.$popup.removeAttr("aria-hidden"),e("body").css("overflow","hidden"),this._deferred=new e.Deferred,this.$popup.on("click",".sui-tab-item",function(t){var i=e(t.currentTarget);i.closest(".sui-side-tabs").find(".sui-tab-item").removeClass("active"),i.addClass("active")}),this._deferred.promise()},close:function(t){var i=e("#hustle-integration-popup");i.find(".sui-dialog-overlay").removeClass("sui-fade-in").addClass("sui-fade-out"),i.find(".sui-dialog-content").removeClass("sui-bounce-in").addClass("sui-bounce-out"),e("body").css("overflow","auto"),setTimeout(function(){i.attr("aria-hidden","true")},300),this._deferred.resolve(this.$popup,t)}},t.integrationsAllRemove={$popup:{},_deferred:{},open:function(t,i){var s=this,n=e("#hustle-dialog--final-delete"),a=function(){return s.close(),!1};n.find(".sui-dialog-close").on("click",a),n.find(".sui-dialog-overlay").on("click",a),n.find("#hustle-delete-final-button-cancel").on("click",a),e("#hustle-delete-final-button").off("click").on("click",function(n){e("#hustle-delete-final-button").addClass("sui-button-onload"),function(e,t){s.deleteIntegration(e,t)}(t,i),function(e){s.insertLocalList(e)}(t),a()}),e("#hustle-integration-dialog").addClass("sui-fade-out").hide(),e("#hustle-delete-final-button").removeAttr("disabled"),SUI.dialogs["hustle-dialog--final-delete"].show()},close:function(){var t=e("#hustle-dialog--final-delete");t.find(".sui-dialog-overlay").removeClass("sui-fade-in").addClass("sui-fade-out"),t.find(".sui-dialog-content").removeClass("sui-bounce-in").addClass("sui-bounce-out"),e("#hustle-delete-final-button").removeClass("sui-button-onload"),e("#hustle-integration-dialog").remove(),e("body").css("overflow","auto"),e("#hustle-delete-final-button").attr("disabled"),setTimeout(function(){t.attr("aria-hidden","true")},300),SUI.dialogs["hustle-dialog--final-delete"].hide()},confirmDelete:function(e,t){this.deleteIntegration(e,t),this.insertLocal(e),this.close()},deleteIntegration:function(e,t){t.request(e,!0,!1)},insertLocalList:function(i){var s={id:i.data.module_id,_ajax_nonce:i._ajax_nonce,action:"hustle_provider_insert_local_list"};e.ajax({url:ajaxurl,type:"POST",data:s,success:function(e){if(e.success)Hustle.Events.trigger("hustle:providers:reload");else{if(void 0===SUI.dialogs["hustle-dialog--final-delete"])return void t.Notification.open("error",optinVars.messages.something_went_wrong);SUI.dialogs["hustle-dialog--final-delete"].hide()}},error:function(){t.Notification.open("error",optinVars.messages.something_went_wrong),SUI.dialogs["hustle-dialog--final-delete"].hide()}})}},t.integrationsActiveRemove={$popup:{},_deferred:{},open:function(t,i,s){var n=this,a=e("#hustle-dialog--remove-active"),o=function(){return n.close(),!1},l=Optin.template("hustle-modules-active-integration-tpl"),r=Optin.template("hustle-modules-active-integration-img-tpl"),d=Optin.template("hustle-modules-active-integration-header-tpl"),u=Optin.template("hustle-modules-active-integration-desc-tpl");e("#hustle-dialog--remove-active tbody").html(""),e("#hustle-dialog--remove-active .sui-dialog-image").html(""),e("#hustle-dialog--remove-active #sui-box-modal-header").html(""),e("#hustle-dialog--remove-active #sui-box-modal-content").html(""),e("#hustle-dialog--remove-active .sui-dialog-image").append(r({image:i.data.img,title:i.data.slug})),e("#hustle-dialog--remove-active #sui-box-modal-header").append(d({title:i.data.title.replace(/Connect|Configure/gi," ")})),e("#hustle-dialog--remove-active #sui-box-modal-content").append(u({title:i.data.title.replace(/Connect|Configure/gi," ")})),e.each(t,function(t,i){e("#hustle-dialog--remove-active tbody").append(l({name:i.name,type:i.type,editUrl:i.edit_url}))}),a.find(".sui-dialog-close").on("click",o),a.find(".sui-dialog-overlay").on("click",o),a.find("#hustle-remove-active-button-cancel").on("click",o),a.find(".hustle-remove-active-integration-back").on("click",function(){n.back(s)}),e("#hustle-remove-active-button").off("click").on("click",function(a){e(this).addClass("sui-button-onload"),function(e,t,i){n.removeIntegration(e,t,i),o()}(i,s,t)}),e("#hustle-integration-dialog").addClass("sui-fade-out").hide(),SUI.dialogs["hustle-dialog--remove-active"].show()},close:function(){var t=e("#hustle-dialog--remove-active");t.find(".sui-dialog-overlay").removeClass("sui-fade-in").addClass("sui-fade-out"),t.find(".sui-dialog-content").removeClass("sui-bounce-in").addClass("sui-bounce-out"),e("#hustle-delete-final-button").removeClass("sui-button-onload"),e("#hustle-integration-dialog").remove(),e("body").css("overflow","auto"),setTimeout(function(){t.attr("aria-hidden","true")},300),SUI.dialogs["hustle-dialog--remove-active"].hide()},back:function(t){this.close(),"hubspot"===t.slug||"constantcontact"===t.slug?e('button[data-slug="'+t.slug+'"]').trigger("click"):e('button[data-global_multi_id="'+t.globalMultiId+'"]').trigger("click")},removeIntegration:function(t,i,s){var n=this;e.each(s,function(e,i){t.data.slug===i.active.active_integrations&&n.insertLocalList(t,e)}),i.request(t,!0,!1),e("#hustle-remove-active-button").removeClass("sui-button-onload")},insertLocalList:function(i,s){var n={id:s,_ajax_nonce:i._ajax_nonce,action:"hustle_provider_insert_local_list"};e.ajax({url:ajaxurl,type:"POST",data:n,success:function(e){!1!==e.success||t.Notification.open("error",optinVars.messages.something_went_wrong)},error:function(){t.Notification.open("error",optinVars.messages.something_went_wrong)}})}},t.ProviderMigration={$popup:{},_deferred:{},open:function(t){var i=e("#hustle-dialog-migrate--"+t),s=function(){return self.close(i,t),!1};i.find(".sui-dialog-close").on("click",s),i.find(".sui-dialog-overlay").on("click",s),setTimeout(function(){return SUI.dialogs["hustle-dialog-migrate--"+t].show()},300)},close:function(t,i){t.find(".sui-dialog-overlay").removeClass("sui-fade-in").addClass("sui-fade-out"),t.find(".sui-dialog-content").removeClass("sui-bounce-in").addClass("sui-bounce-out"),e("body").css("overflow","auto"),setTimeout(function(){return t.attr("aria-hidden","true")},300),SUI.dialogs["hustle-dialog-migrate--"+i].hide()}},t.deleteModal={open:function(i){var s="hustle-dialog--delete",n=Optin.template("hustle-dialog--delete-tpl")(i);if(e("#"+s+" #hustle-delete-dialog-content").html(n),e("#"+s+" #hustle-dialog-title").html(i.title),void 0===SUI.dialogs[s])return t.Notification.open("error",optinVars.messages.something_went_wrong),!1;e("#"+s+" .hustle-delete-confirm").on("click",function(t){e(t.currentTarget).addClass("sui-button-onload")}),SUI.dialogs[s].create(),SUI.dialogs[s].show()}},t.preview={open:function(t,i){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this,a="embedded"===i||"social_sharing"===i;e.ajax({url:ajaxurl,type:"POST",data:{action:"hustle_preview_module",id:t,previewData:s}}).then(function(i){if(i.success){var s="";a?s=e("#hustle-dialog--preview .sui-box-body"):(s=e("#module-preview-container")).length||(e("main.sui-wrap").append('<div id="module-preview-container"></div>'),s=e("#module-preview-container")),s.html(i.data.html);var n=s.find(".hustle-ui");if(HUI.maybeRenderRecaptcha(n),n.find(".hustle-select2").length&&HUI.select2(),n.find(".hustle-time").length&&HUI.timepicker(".hustle-time"),n.find(".hustle-date").length){var o=optinVars.messages.days_and_months;HUI.datepicker(".hustle-date",o.days_full,o.days_short,o.days_min,o.months_full,o.months_short)}HUI.nonSharingSimulation(n),HUI.inputFilled(),i.data.style&&s.append(i.data.style),i.data.script&&s.append(i.data.script)}return{id:t,data:i.data.module}},function(e){}).then(function(e){var t=e.id,i=e.data;t&&(a&&SUI.dialogs["hustle-dialog--preview"].show(),n.showModule(t,i))}).always(function(){e(".sui-button-onload").removeClass("sui-button-onload")})},showModule:function(t,i){var s=".hustle_module_id_"+t;if("popup"===i.module_type){var n="0"!==String(e(s).data("close-delay"))&&e(s).data("close-delay");HUI.popupLoad(s,n)}else if("slidein"===i.module_type){var a="0"!==String(e(s).data("close-delay"))&&e(s).data("close-delay");HUI.slideinLayouts(s),HUI.slideinLoad(s,a),e(window).on("resize",function(){HUI.slideinLayouts(s)})}else HUI.inlineResize(s),HUI.inlineLoad(s)}},t.trackingChart={chartsData:{},theCharts:{},init:function(t,i){var s=this;t.find("select.hustle-conversion-type").each(function(i,n){SUI.suiSelect(n),e(n).on("change.select2",function(e){return s.conversionTypeChanged(e,t)})}),this.chartsData=i,Object.values(i).forEach(function(e){return s.updateChart(e)})},conversionTypeChanged:function(t,i){var s=e(t.currentTarget),n=s.val(),a=s.data("moduleType"),o=this.chartsData[a],l=i.find(".hustle-tracking-".concat(a,"-conversions-count")),r=i.find(".hustle-tracking-".concat(a,"-conversions-rate"));l.text(o[n].conversions_count),r.text(o[n].conversion_rate+"%"),this.updateChart(o,n,!1)},updateChart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=e.views,n=[{label:"Submissions",data:e[t].conversions,backgroundColor:["#E1F6FF"],borderColor:["#17A8E3"],borderWidth:2,pointRadius:0,pointHitRadius:20,pointHoverRadius:5,pointHoverBorderColor:"#17A8E3",pointHoverBackgroundColor:"#17A8E3"},{label:"Views",data:s,backgroundColor:["#F8F8F8"],borderColor:["#DDDDDD"],borderWidth:2,pointRadius:0,pointHitRadius:20,pointHoverRadius:5,pointHoverBorderColor:"#DDDDDD",pointHoverBackgroundColor:"#DDDDDD"}];void 0!==this.theCharts[e.id]?i?(this.theCharts[e.id].destroy(),this.createNewChart(e,n)):(this.theCharts[e.id].data.datasets=n,this.theCharts[e.id].update()):this.createNewChart(e,n)},createNewChart:function(e,t){var i=Math.max.apply(Math,_toConsumableArray(e.views))+2,s=document.getElementById(e.id);if(Math.max.apply(Math,_toConsumableArray(e.views))<Math.max.apply(Math,_toConsumableArray(e.conversions))&&(i=Math.max.apply(Math,_toConsumableArray(e.conversions))+2),s){var n={labels:e.days,datasets:t},a={maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{display:!1,gridLines:{color:"rgba(0, 0, 0, 0)"}}],yAxes:[{display:!1,gridLines:{color:"rgba(0, 0, 0, 0)"},ticks:{beginAtZero:!1,min:0,max:i,stepSize:1}}]},elements:{line:{tension:0},point:{radius:.5}},tooltips:{custom:function(e){e&&(e.displayColors=!1)},callbacks:{title:function(e,t){return 0===e[0].datasetIndex?optinVars.labels.submissions.replace("%d",e[0].yLabel):1===e[0].datasetIndex?optinVars.labels.views.replace("%d",e[0].yLabel):void 0},label:function(e,t){return e.xLabel},labelTextColor:function(e,t){return"#AAAAAA"}}}};this.theCharts[e.id]=new Chart(s,{type:"line",fill:"start",data:n,options:a})}}},t.hasChanges=!1,window.onbeforeunload=function(){if(t.hasChanges)return optinVars.messages.dont_navigate_away},e(".highlight_input_text").focus(function(){e(this).select()})}(jQuery),function(e){"use strict";var t=window.Module||{};t.Utils={getUrlParam:function(e){var t,i,s=window.location.search.substring(1).split("&");for(i=0;i<s.length;i++)if((t=s[i].split("="))[0]===e)return t[1];return!1},accessibleHide:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.hide(),e.attr("aria-hidden",!0),e.prop("hidden",!0),t&&e.prop("tabindex","-1"),i&&void 0!==i.name&&(void 0!==i.value?e.attr(i.name,i.value):e.removeAttr(i.name))},accessibleShow:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.show(),e.removeAttr("aria-hidden"),e.removeClass("sui-hidden"),e.removeProp("hidden"),t&&e.attr("tabindex","0"),i&&void 0!==i.name&&(void 0!==i.value?e.attr(i.name,i.value):e.removeAttr(i.name))}},t.handleActions={context:"",initAction:function(i,s,n){i.preventDefault(),this.context=s;var a=this,o=e(i.currentTarget),l=o.data("form-id"),r=o.data(),d=new FormData;if(void 0!==l){var u=e("#"+l);u.length&&(d=new FormData(u[0]))}e.each(r,function(e,t){return d.append(e,t)}),d.append("context",this.context),d.append("_ajax_nonce",optinVars.single_module_action_nonce),d.append("action","hustle_module_handle_single_action"),e.ajax({url:ajaxurl,type:"POST",data:d,contentType:!1,processData:!1}).done(function(i){i.data.callback&&"function"==typeof a[i.data.callback]?a[i.data.callback](o,i.data,i.success):i.data.callback&&"function"==typeof n[i.data.callback]?n[i.data.callback](o,i.data,i.success):i.data.url?location.replace(i.data.url):i.data.notification&&t.Notification.open(i.data.notification.status,i.data.notification.message,i.data.notification.delay),i.data.url||e(".sui-button-onload").removeClass("sui-button-onload")}).error(function(t){e(".sui-button-onload").removeClass("sui-button-onload")})},actionToggleTracking:function(i,s){if(s.is_embed_or_sshare){var n=e('.hustle-manage-tracking-button[data-module-id="'+i.data("module-id")+'"]'),a=n.parents(".sui-accordion-item");SUI.dialogs["hustle-dialog--manage-tracking"].hide(),n.data("tracking-types",s.enabled_types),a.hasClass("sui-accordion-item--open")&&a.find(".sui-accordion-open-indicator").trigger("click").trigger("click")}else{var o=s.was_enabled?1:0,l=i.parents(".sui-accordion-item");i.data("enabled",1-o),i.find("span").toggleClass("sui-hidden"),l.hasClass("sui-accordion-item--open")&&l.find(".sui-accordion-open-indicator").trigger("click").trigger("click")}t.Notification.open("success",s.message,1e4)}}}(jQuery),Hustle.define("SShare.Content_View",function(e,t,i){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Module_Content"),{activePlatforms:[],events:{"change select.hustle-select-field-variables":"addPlaceholderToField","click ul.wpmudev-tabs-menu li label":"toggleCheckbox","click .hustle-choose-platforms":"openPlatformsModal"},render:function(t){if(this.targetContainer.length){var i=this,s=this.model.toJSON();if(this.setElement(this.template(_.extend({module_type:i.moduleType},s))),void 0!==s.social_icons&&s.social_icons)for(var n in s.social_icons)i.addPlatformToPanel(n,s.social_icons[n]);var a=this.$("#hustle-social-services").sortable({axis:"y",containment:".sui-box-builder"});for(var o in a.on("sortupdate",e.proxy(i.platformsOrderChanged,i,a)),optinVars.social_platforms)i.addPlatformToDialog(o);return this}},afterRender:function(){this.bindRemoveService(),optinVars.is_new&&Module.Notification.open("success",optinVars.messages.commons.module_created.replace(/{type_name}/g,optinVars.module_name[this.moduleType]),1e4)},bindRemoveService:function(){e("#hustle-wizard-content .hustle-remove-social-service").off("click").on("click",e.proxy(this.removeService,this))},openPlatformsModal:function(t){var i=this.model.get("social_icons"),s=void 0!==i?Object.keys(i):[];new(Hustle.get("Modals.Services_Platforms"))(s).on("platforms:added",e.proxy(this.addNewPlatforms,this)),SUI.dialogs["hustle-dialog--add-platforms"].show()},addNewPlatforms:function(t){var i=this;this.model.get("social_icons")||this.model.set("social_icons",{});var s=this,n=_.extend({},this.model.get("social_icons"));e.each(t,function(e,t){if(n&&t in n)return!0;s.addPlatformToPanel(t,{});var a=i.getPlatformDefaults(t);n[t]=a}),this.bindRemoveService(),this.model.set("social_icons",n),Hustle.Events.trigger("view.rendered",this)},addPlatformToPanel:function(e,t){var i=Optin.template("hustle-platform-row-tpl"),s=this.$("#hustle-social-services");t=_.extend({},this.getPlatformViewDefaults(e),t),this.activePlatforms.push(e),s.append(i(t))},addPlatformToDialog:function(t){var i=Optin.template("hustle-add-platform-li-tpl"),s=e("#hustle_add_platforms_container"),n=this.getPlatformViewDefaults(t);s.append(i(n))},getPlatformDefaults:function(e){var t={platform:e,label:e in optinVars.social_platforms?optinVars.social_platforms[e]:e,type:"click",counter:"0",link:""};return"email"===e&&(t.title="{post_title}",t.message=optinVars.social_platforms_data.email_message_default),t},getPlatformViewDefaults:function(e){var t=this.model.toJSON(),i=void 0===t.counter_enabled?"true":t.counter_enabled,s={fivehundredpx:"500px"},n=-1!==optinVars.social_platforms_with_endpoints.indexOf(e),a=-1!==optinVars.social_platforms_with_api.indexOf(e),o=e in s?s[e]:e;return _.extend({},this.getPlatformDefaults(e),{platform_style:o,counter_enabled:i,hasEndpoint:n,hasCounter:a})},platformsOrderChanged:function(e){var t=this.model.get("social_icons"),i=e.sortable("toArray",{attribute:"data-platform"}),s={},n=!0,a=!1,o=void 0;try{for(var l,r=i[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value;s[d]=t[d]}}catch(e){a=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(a)throw o}}this.model.set("social_icons",s),this.model.trigger("change",this.model)},removeService:function(t){var i=e(t.currentTarget).data("platform"),s=this.model.get("social_icons");this.$("#hustle-platform-"+i).remove(),this.activePlatforms=_.without(this.activePlatforms,i),delete s[i],this.model.trigger("change",this.model),t.stopPropagation()},modelUpdated:function(e){var t,i=e.changed,s=void 0!==Object.keys(i)[0]?Object.keys(i)[0]:"";if("service_type"in i&&this.serviceTypeUpdated(i.service_type),"click_counter"in i)this.clickCounterUpdated(i.click_counter);else if(-1!==s.indexOf("_counter")){var n=s.slice(0,-8);n in(t=this.model.get("social_icons"))&&(t[n].counter=parseInt(i[s])),this.model.unset(s,{silent:!0})}if(-1!==s.indexOf("_link")){var a=s.slice(0,-5);a in(t=this.model.get("social_icons"))&&(t[a].link=i[s]),this.model.unset(s,{silent:!0})}if(-1!==s.indexOf("_type")){var o=s.slice(0,-5);o in(t=this.model.get("social_icons"))&&(t[o].type="native"===i[s]?"native":"click"),this.model.unset(s,{silent:!0})}if("email_title"in i){"email"in(t=this.model.get("social_icons"))&&(t.email.title=i[s]),this.model.unset(s,{silent:!0})}if("email_message"in i){"email"in(t=this.model.get("social_icons"))&&(t.email.message=i[s]),this.model.unset(s,{silent:!0})}},serviceTypeUpdated:function(t){var i=this.$("#wpmudev-sshare-counter-options"),s=e(".wph-wizard-services-icons-native"),n=e(".wph-wizard-services-icons-custom");"native"===t?(i.removeClass("wpmudev-hidden"),n.addClass("wpmudev-hidden"),s.removeClass("wpmudev-hidden")):(i.addClass("wpmudev-hidden"),s.addClass("wpmudev-hidden"),n.removeClass("wpmudev-hidden"))},clickCounterUpdated:function(t){var i=e("#wpmudev-sshare-counter-options .hustle-twitter-notice");"native"===t?i.removeClass("wpmudev-hidden"):i.hasClass("wpmudev-hidden")||i.addClass("wpmudev-hidden"),e("#wph-wizard-services-icons-native .wpmudev-social-item").each(function(){var i=e(this).find(".toggle-checkbox").is(":checked"),s=e(this).find("input.wpmudev-input_number");"none"!==t&&i?s.removeClass("wpmudev-hidden"):s.hasClass("wpmudev-hidden")||s.addClass("wpmudev-hidden")}),e("#wph-wizard-services-icons-native #wpmudev-counter-title>strong").removeClass("wpmudev-hidden"),"none"===t?e("#wph-wizard-services-icons-native #wpmudev-counter-title>strong:first-child").addClass("wpmudev-hidden"):e("#wph-wizard-services-icons-native #wpmudev-counter-title>strong:nth-child(2)").addClass("wpmudev-hidden")},toggleCheckbox:function(e){var t=this.$(e.target).closest("li"),i=t.find("input"),s=i.data("attribute");e.preventDefault(),e.stopPropagation(),t.hasClass("current")||(t.addClass("current"),t.siblings().removeClass("current"),this.model.set(s,i.val()))},setSocialIcons:function(){var e=this.model.toJSON();e=this.getSocialIconsData(e),this.model.set("social_icons",e.social_icons,{silent:!0})},getSocialIconsData:function(t){var i=e("#wph-wizard-services-icons-"+t.service_type+" .wpmudev-social-item"),s={};return i.each(function(){var t=e(this),i=t.find("input.toggle-checkbox"),n=i.data("id"),a=t.find("input.wpmudev-input_number"),o=t.find("input.wpmudev-input_text");a.length&&(0>parseInt(a.val())&&a.val(0));i.is(":checked")&&(s[n]={enabled:!0,counter:a.length?a.val():"0",link:o.length?o.val():""})}),i.length&&(t.social_icons=s),t},addPlaceholderToField:function(t){var i=e(t.currentTarget),s=i.val(),n=i.data("field"),a=e('[name="'.concat(n,'"]')),o=a.val()+s;a.val(o).trigger("change")}}))}),Hustle.define("SShare.Design_View",function(e,t,i){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Model_Updater"),Hustle.get("Mixins.Module_Design"),{beforeRender:function(){Hustle.Events.off("modules.view.displayTypeUpdated").on("modules.view.displayTypeUpdated",e.proxy(this.viewChangedDisplayTab,this))},afterRender:function(){this.targetContainer.length&&this.createPickers(),e('a[data-tab="appearance"]').on("click",e.proxy(this.updatePreview,this)),e('.sui-box[data-tab="display"] .sui-button[data-direction="next"').on("click",e.proxy(this.updatePreview,this)),e('.sui-box[data-tab="visibility"] .sui-button[data-direction="prev"').on("click",e.proxy(this.updatePreview,this)),this.updatePreview()},updatePreview:function(){e("#hui-preview-social-shares-floating").trigger("hustle_update_prewiev")},viewChanged:function(t){var i=t.changed,s=void 0!==Object.keys(i)[0]?Object.keys(i)[0]:"";if("flat"===t.get("icon_style")?(e("#hustle-floating-icons-custom-background").addClass("sui-hidden"),e("#hustle-widget-icons-custom-background").addClass("sui-hidden")):(e("#hustle-floating-icons-custom-background").removeClass("sui-hidden"),e("#hustle-widget-icons-custom-background").removeClass("sui-hidden")),"outline"===t.get("icon_style")?(e("#hustle-floating-icons-custom-background .sui-label").text("Icon border"),e("#hustle-widget-icons-custom-background .sui-label").text("Icon border"),e("#hustle-floating-counter-border").addClass("sui-hidden"),e("#hustle-widget-counter-border").addClass("sui-hidden")):(e("#hustle-floating-icons-custom-background .sui-label").text("Icon background"),e("#hustle-widget-icons-custom-background .sui-label").text("Icon background"),e("#hustle-floating-counter-border").removeClass("sui-hidden"),e("#hustle-widget-counter-border").removeClass("sui-hidden")),-1!==s.indexOf("_customize_colors")){var n=s.slice(0,-17);this.toggleCheckbox("#hustle-"+n+"--customize-colors-toggle-wrapper",i[s])}this.updatePreview()},viewChangedDisplayTab:function(t){var i=t.get("inline_enabled"),s=t.get("widget_enabled"),n=t.get("shortcode_enabled"),a=t.get("float_desktop_enabled"),o=t.get("float_mobile_enabled"),l=_.intersection([1,"1","true"],[i,s,n]).length,r=_.intersection([1,"1","true"],[o,a]).length;r?(e("#hustle-appearance-floating-icons-row").show(),e("#hustle-appearance-floating-icons-placeholder").hide()):(e("#hustle-appearance-floating-icons-row").hide(),e("#hustle-appearance-floating-icons-placeholder").show()),l?(e("#hustle-appearance-widget-icons-row").show(),e("#hustle-appearance-widget-icons-placeholder").hide()):(e("#hustle-appearance-widget-icons-row").hide(),e("#hustle-appearance-widget-icons-placeholder").show()),l||r?(e("#hustle-appearance-icons-style").show(),e("#hustle-appearance-empty-message").hide()):(e("#hustle-appearance-icons-style").hide(),e("#hustle-appearance-empty-message").show(),e("#hustle-appearance-floating-icons-placeholder").hide(),e("#hustle-appearance-widget-icons-placeholder").hide())},toggleCheckbox:function(e,t){var i=this.$(e);i.length&&(t?i.removeClass("sui-hidden"):i.addClass("sui-hidden"))}}))}),Hustle.define("SShare.Display_View",function(e){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Module_Display"),{moduleType:"social_sharing",extViewChanged:function(e){_.intersection(["float_desktop_enabled","float_mobile_enabled","inline_enabled","widget_enabled","shortcode_enabled"],Object.keys(e)).length?Hustle.Events.trigger("modules.view.displayTypeUpdated",this.model):"float_desktop_position"in e?"right"===e.float_desktop_position?(this.$("#hustle-float_desktop-left-offset-label").addClass("sui-hidden"),this.$("#hustle-float_desktop-right-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_desktop-offset-x-wrapper").removeClass("sui-hidden")):"left"===e.float_desktop_position?(this.$("#hustle-float_desktop-left-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_desktop-right-offset-label").addClass("sui-hidden"),this.$("#hustle-float_desktop-offset-x-wrapper").removeClass("sui-hidden")):this.$("#hustle-float_desktop-offset-x-wrapper").addClass("sui-hidden"):"float_desktop_position_y"in e?"bottom"===e.float_desktop_position_y?(this.$("#hustle-float_desktop-top-offset-label").addClass("sui-hidden"),this.$("#hustle-float_desktop-bottom-offset-label").removeClass("sui-hidden")):(this.$("#hustle-float_desktop-top-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_desktop-bottom-offset-label").addClass("sui-hidden")):"float_mobile_position"in e?"right"===e.float_mobile_position?(this.$("#hustle-float_mobile-left-offset-label").addClass("sui-hidden"),this.$("#hustle-float_mobile-right-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_mobile-offset-x-wrapper").removeClass("sui-hidden")):"left"===e.float_mobile_position?(this.$("#hustle-float_mobile-left-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_mobile-right-offset-label").addClass("sui-hidden"),this.$("#hustle-float_mobile-offset-x-wrapper").removeClass("sui-hidden")):this.$("#hustle-float_mobile-offset-x-wrapper").addClass("sui-hidden"):"float_mobile_position_y"in e&&("bottom"===e.float_mobile_position_y?(this.$("#hustle-float_mobile-top-offset-label").addClass("sui-hidden"),this.$("#hustle-float_mobile-bottom-offset-label").removeClass("sui-hidden")):(this.$("#hustle-float_mobile-top-offset-label").removeClass("sui-hidden"),this.$("#hustle-float_mobile-bottom-offset-label").addClass("sui-hidden")))}}))}),Hustle.define("Modals.Services_Platforms",function(e){"use strict";return Backbone.View.extend({el:"#hustle-dialog--add-platforms",selectedPlatforms:[],events:{"click .sui-box-selector input":"selectPlatforms","click .hustle-cancel-platforms":"cancelPlatforms","click .sui-dialog-overlay":"cancelPlatforms","click #hustle-add-platforms":"addPlatforms"},initialize:function(e){this.selectedPlatforms=e,this.$(".hustle-add-platforms-option").prop("checked",!1).prop("disabled",!1);var t=!0,i=!1,s=void 0;try{for(var n,a=this.selectedPlatforms[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;this.$("#hustle-social--"+o).prop("checked",!0).prop("disabled",!0)}}catch(e){i=!0,s=e}finally{try{t||null==a.return||a.return()}finally{if(i)throw s}}},selectPlatforms:function(e){var t=this.$(e.target),i=this.$el.find('label[for="'+t.attr("id")+'"]'),s=t.val();i.toggleClass("selected"),t.prop("checked")?this.selectedPlatforms.push(s):this.selectedPlatforms=_.without(this.selectedPlatforms,s)},checkPlatforms:function(){var e=!0,t=!1,i=void 0;try{for(var s,n=this.selectedPlatforms[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var a=s.value;this.$("#hustle-social--"+a).prop("checked")||(this.selectedPlatforms=_.without(this.selectedPlatforms,a))}}catch(e){t=!0,i=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw i}}},cancelPlatforms:function(){SUI.dialogs["hustle-dialog--add-platforms"].hide()},addPlatforms:function(e){var t=this.$(e.target);t.addClass("sui-button-onload"),this.checkPlatforms(),this.trigger("platforms:added",this.selectedPlatforms),setTimeout(function(){SUI.dialogs["hustle-dialog--add-platforms"].hide(),t.removeClass("sui-button-onload")},500)}})}),Hustle.define("SShare.View",function(e,t,i){"use strict";return Hustle.View.extend(_.extend({},Hustle.get("Mixins.Wizard_View"),{moduleType:"social_sharing",_events:{"hustle_update_prewiev #hui-preview-social-shares-floating":"updatePreview"},updatePreview:function(t){var i=_.extend({},this.model.toJSON(),this.getDataToSave());e.ajax({type:"POST",url:ajaxurl,dataType:"json",data:{action:"hustle_preview_module",id:this.model.get("module_id"),previewData:i},success:function(t){if(t.success){var i=e("#hui-preview-social-shares-floating"),s=e("#hui-preview-social-shares-widget");i.html(t.data.floatingHtml),s.html(t.data.widgetHtml),t.data.style&&i.append(t.data.style),e(".hustle-share-icon").on("click",function(e){return e.preventDefault()})}}})},setTabsViews:function(e){this.contentView=e.contentView,this.displayView=e.displayView,this.designView=e.designView,this.visibilityView=e.visibilityView},renderTabs:function(){this.contentView.targetContainer.html(""),this.contentView.render(),this.contentView.delegateEvents(),this.contentView.targetContainer.append(this.contentView.$el),this.contentView.afterRender(),this.designView.targetContainer.html(""),this.designView.delegateEvents(),this.designView.targetContainer.append(this.designView.$el),this.designView.afterRender(),this.displayView.targetContainer.html(""),this.displayView.render(),this.displayView.delegateEvents(),this.displayView.targetContainer.append(this.displayView.$el),this.displayView.afterRender(),this.visibilityView.delegateEvents(),this.visibilityView.targetContainer.append(this.visibilityView.$el),this.visibilityView.afterRender()},sanitizeData:function(){},getDataToSave:function(){return{content:this.contentView.model.toJSON(),display:this.displayView.model.toJSON(),design:this.designView.model.toJSON(),visibility:this.visibilityView.model.toJSON()}}}))}),Hustle.define("Popup.Module",function(){"use strict";var e;(e="_page_hustle_popup_listing")===pagenow.substr(pagenow.length-e.length)&&new Optin.listingBase({moduleType:optinVars.current.module_type}),function(){var e="_page_hustle_popup";if(e===pagenow.substr(pagenow.length-e.length)){var t=Hustle.get("Models.Module_Defaults"),i=t.visibilityDefaults,s=t.settingsDefaults,n=Hustle.View.extend(Hustle.get("Mixins.Wizard_View")),a=Hustle.View.extend(Hustle.get("Mixins.Module_Content")),o=Hustle.View.extend(Hustle.get("Mixins.Module_Emails")),l=Hustle.View.extend(Hustle.get("Mixins.Module_Design")),r=Hustle.View.extend(Hustle.get("Mixins.Module_Visibility")),d=Hustle.View.extend(Hustle.get("Mixins.Module_Settings")),u=Hustle.get("Module.IntegrationsView"),c=Module.Model,h=Hustle.get("Models.M"),p=Hustle.get("Models.M"),g=Hustle.get("Models.M"),f=Hustle.get("Models.M"),m=Hustle.get("Models.M").extend({defaults:i.defaults,initialize:i.initialize}),v=Hustle.get("Models.M").extend({defaults:s.defaults,initialize:s.initialize}),_=new c(optinVars.current.data||{}),b=new h(optinVars.current.content||{}),w=new p(optinVars.current.emails||{}),y=new g(optinVars.current.design||{}),x=new f(optinVars.current.integrations_settings||{}),C=new m(optinVars.current.visibility||{}),k=new v(optinVars.current.settings||{});new n({model:_,contentView:new a({model:b,moduleType:optinVars.current.data.module_type}),emailsView:new o({model:w}),designView:new l({model:y}),integrationsView:new u({model:x,moduleId:optinVars.current.data.module_id}),visibilityView:new r({model:C,moduleType:optinVars.current.data.module_type}),settingsView:new d({model:k})})}}()}),Hustle.define("Slidein.Module",function(){"use strict";var e;(e="_page_hustle_slidein_listing")===pagenow.substr(pagenow.length-e.length)&&new Optin.listingBase({moduleType:optinVars.current.module_type}),function(){var e="_page_hustle_slidein";if(e===pagenow.substr(pagenow.length-e.length)){var t=Hustle.get("Models.Module_Defaults"),i=t.visibilityDefaults,s=t.settingsDefaults,n=Hustle.View.extend(Hustle.get("Mixins.Wizard_View")),a=Hustle.View.extend(Hustle.get("Mixins.Module_Content")),o=Hustle.View.extend(Hustle.get("Mixins.Module_Emails")),l=Hustle.View.extend(Hustle.get("Mixins.Module_Design")),r=Hustle.View.extend(Hustle.get("Mixins.Module_Visibility")),d=Hustle.View.extend(Hustle.get("Mixins.Module_Settings")),u=Hustle.get("Module.IntegrationsView"),c=Module.Model,h=Hustle.get("Models.M"),p=Hustle.get("Models.M"),g=Hustle.get("Models.M"),f=Hustle.get("Models.M"),m=Hustle.get("Models.M").extend({defaults:i.defaults,initialize:i.initialize}),v=Hustle.get("Models.M").extend({defaults:s.defaults,initialize:s.initialize}),_=new c(optinVars.current.data||{}),b=new h(optinVars.current.content||{}),w=new p(optinVars.current.emails||{}),y=new g(optinVars.current.design||{}),x=new f(optinVars.current.integrations_settings||{}),C=new m(optinVars.current.visibility||{}),k=new v(optinVars.current.settings||{});new n({model:_,contentView:new a({model:b,moduleType:optinVars.current.data.module_type}),emailsView:new o({model:w}),designView:new l({model:y}),integrationsView:new u({model:x,moduleId:optinVars.current.data.module_id}),visibilityView:new r({model:C,moduleType:optinVars.current.data.module_type}),settingsView:new d({model:k})})}}()}),Hustle.define("Embedded.Module",function(){"use strict";var e;(e="_page_hustle_embedded_listing")===pagenow.substr(pagenow.length-e.length)&&new Optin.listingBase({moduleType:optinVars.current.module_type}),function(){var e="_page_hustle_embedded";if(e===pagenow.substr(pagenow.length-e.length)){var t=Hustle.get("Models.Module_Defaults").visibilityDefaults,i=Hustle.View.extend(Hustle.get("Mixins.Wizard_View")),s=Hustle.View.extend(Hustle.get("Mixins.Module_Content")),n=Hustle.View.extend(Hustle.get("Mixins.Module_Emails")),a=Hustle.View.extend(Hustle.get("Mixins.Module_Design")),o=Hustle.View.extend(Hustle.get("Mixins.Module_Display")),l=Hustle.View.extend(Hustle.get("Mixins.Module_Visibility")),r=Hustle.View.extend(Hustle.get("Mixins.Module_Settings")),d=Hustle.get("Module.IntegrationsView"),u=Module.Model,c=Hustle.get("Models.M"),h=Hustle.get("Models.M"),p=Hustle.get("Models.M"),g=Hustle.get("Models.M"),f=Hustle.get("Models.M"),m=Hustle.get("Models.M").extend({defaults:t.defaults,initialize:t.initialize}),v=Hustle.get("Models.M"),_=new u(optinVars.current.data||{}),b=new c(optinVars.current.content||{}),w=new h(optinVars.current.emails||{}),y=new p(optinVars.current.design||{}),x=new g(optinVars.current.integrations_settings||{}),C=new f(optinVars.current.display||{}),k=new m(optinVars.current.visibility||{}),V=new v(optinVars.current.settings||{});new i({model:_,contentView:new s({model:b,moduleType:optinVars.current.data.module_type}),emailsView:new n({model:w}),designView:new a({model:y}),integrationsView:new d({model:x,moduleId:optinVars.current.data.module_id}),displayView:new o({model:C,moduleType:optinVars.current.data.module_type}),visibilityView:new l({model:k,moduleType:optinVars.current.data.module_type}),settingsView:new r({model:V})})}}()}),Hustle.define("SShare.Module",function(e){"use strict";var t;(t="_page_hustle_sshare_listing")===pagenow.substr(pagenow.length-t.length)&&new Optin.listingBase({moduleType:optinVars.current.module_type}),function(){var e="_page_hustle_sshare";if(e===pagenow.substr(pagenow.length-e.length)){var t=Hustle.get("Models.Module_Defaults").visibilityDefaults,i=Hustle.get("SShare.View"),s=Hustle.get("SShare.Content_View"),n=Hustle.get("SShare.Display_View"),a=Hustle.get("SShare.Design_View"),o=Hustle.View.extend(Hustle.get("Mixins.Module_Visibility")),l=Module.Model,r=Hustle.get("Models.M"),d=Hustle.get("Models.M"),u=Hustle.get("Models.M"),c=Hustle.get("Models.M").extend({defaults:t.defaults,initialize:t.initialize}),h=new l(optinVars.current.data||{}),p=new r(optinVars.current.content||{}),g=new d(optinVars.current.display||{}),f=new u(optinVars.current.design||{}),m=new c(optinVars.current.visibility||{});new i({model:h,contentView:new s({model:p,moduleType:optinVars.current.data.module_type}),displayView:new n({model:g}),designView:new a({model:f}),visibilityView:new o({model:m,moduleType:optinVars.current.data.module_type})})}}()}),Hustle.define("Dashboard.View",function(e,t,i){"use strict";"toplevel_page_hustle"===pagenow&&new(Backbone.View.extend({el:".sui-wrap",events:{"click .hustle-preview-module-button":"openPreview","click .hustle-delete-module-button":"openDeleteModal","click .hustle-free-version-create":"showUpgradeModal","click .sui-dropdown .hustle-onload-icon-action":"addLoadingIconToActionsButton","click .hustle-single-module-button-action":"handleSingleModuleAction"},initialize:function(t){e("#hustle-dialog--welcome").length&&this.openWelcomeDialog(),e("#hustle-dialog--migrate").length&&this.openMigrateDialog(),this.doActionsBasedOnUrl()},doActionsBasedOnUrl:function(){if(Module.Utils.getUrlParam("show-notice")){var e="success"===Module.Utils.getUrlParam("show-notice")?"success":"error",t=Module.Utils.getUrlParam("notice"),i=t&&"undefined"!==optinVars.messages.commons[t]?optinVars.messages.commons[t]:Module.Utils.getUrlParam("notice-message");void 0!==i&&i.length&&Module.Notification.open(e,i)}},openPreview:function(t){var i=e(t.currentTarget),s=i.data("id"),n=i.data("type");Module.preview.open(s,n)},showUpgradeModal:function(t){void 0!==t&&t.preventDefault(),e("#wph-upgrade-modal").addClass("wpmudev-modal-active")},openDeleteModal:function(t){t.preventDefault();var i=e(t.currentTarget),s={id:i.data("id"),nonce:i.data("nonce"),action:"delete",title:i.data("title"),description:i.data("description")};Module.deleteModal.open(s)},addLoadingIconToActionsButton:function(t){e(t.currentTarget).closest(".sui-dropdown").find(".sui-dropdown-anchor").addClass("sui-button-onload")},openWelcomeDialog:function(){Hustle.get("Modals.Welcome")},openMigrateDialog:function(){Hustle.get("Modals.Migration")},handleSingleModuleAction:function(e){Module.handleActions.initAction(e,"dashboard",this)},actionToggleStatus:function(e,t){var i=t.was_module_enabled;e.find("span").toggleClass("sui-hidden");var s=e.parents("td.hui-status").find("span.sui-tooltip");s.removeClass("sui-draft sui-published"),i?s.addClass("sui-draft").attr("data-tooltip",optinVars.messages.commons.draft):s.addClass("sui-published").attr("data-tooltip",optinVars.messages.commons.published)}}))}),Hustle.define("Integrations.View",function(e,t,i){"use strict";var s="_page_hustle_integrations";s===pagenow.substr(pagenow.length-s.length)&&new(Backbone.View.extend({el:".sui-wrap",events:{"click .connect-integration":"connectIntegration","keypress .connect-integration":"preventEnterKeyFromDoingThings"},initialize:function(){this.stopListening(Hustle.Events,"hustle:providers:reload",this.renderProvidersTables),this.listenTo(Hustle.Events,"hustle:providers:reload",this.renderProvidersTables),this.render()},render:function(){var e=this.$el.find("#hustle-not-connected-providers-section"),t=this.$el.find("#hustle-connected-providers-section");0<e.length&&0<t.length&&this.renderProvidersTables(),optinVars.integration_redirect&&this.handleIntegrationRedirect()},renderProvidersTables:function(){var t=this,i={};this.$el.find(".hustle-integrations-display").html('<div class="sui-notice sui-notice-sm sui-notice-loading"><p>'+optinVars.fetching_list+"</p></div>"),i.action="hustle_provider_get_providers",i._ajax_nonce=optinVars.providers_action_nonce,i.data={},e.post({url:ajaxurl,type:"post",data:i}).done(function(e){e&&e.success&&(t.$el.find("#hustle-not-connected-providers-section").html(e.data.not_connected),t.$el.find("#hustle-connected-providers-section").html(e.data.connected))}).always(function(){t.$el.find(".sui-notice-loading").remove()})},preventEnterKeyFromDoingThings:function(e){13!==e.which||e.preventDefault()},connectIntegration:function(e){Module.integrationsModal.open(e)},handleIntegrationRedirect:function(){var e=optinVars.integration_redirect,t=optinVars.integrations_migrate;if(window.history.pushState({},document.title,optinVars.integrations_url),"notification"===e.action){var i="success"===e.status?"success":"error",s=e.delay?e.delay:1e4;Module.Notification.open(i,e.message,s)}if(t.hasOwnProperty("provider_modal")&&"constantcontact"===t.provider_modal&&Module.ProviderMigration.open(t.provider_modal),t.hasOwnProperty("migration_notificaiton")){var n="success"===t.migration_notificaiton.status?"success":"error",a=t.migration_notificaiton.delay?t.migration_notificaiton.delay:1e4;Module.Notification.open(n,t.migration_notificaiton.message,a)}}}))}),Hustle.define("Entries.View",function(e){"use strict";var t="_page_hustle_entries";t===pagenow.substr(pagenow.length-t.length)&&new(Backbone.View.extend({el:".sui-wrap",events:{"click .sui-pagination-wrap .hustle-open-inline-filter":"openFilterInline","click .sui-pagination-wrap .hustle-open-dialog-filter":"openFilterModal","click #hustle-dialog--filter-entries .hustle-dialog-close":"closeFilterModal","click .hustle-delete-entry-button":"openDeleteModal","click .sui-active-filter-remove":"removeFilter","click .hustle-entries-clear-filter":"clearFilter"},initialize:function(t){var i={},s=e(".hui-entries-alert");void 0!==window.hustle_entries_datepicker_ranges&&(i=window.hustle_entries_datepicker_ranges),e("input.hustle-entries-filter-date").daterangepicker({autoUpdateInput:!1,autoApply:!0,alwaysShowCalendars:!0,ranges:i,locale:optinVars.daterangepicker}),e("input.hustle-entries-filter-date").on("apply.daterangepicker",function(t,i){e(this).val(i.startDate.format("MM/DD/YYYY")+" - "+i.endDate.format("MM/DD/YYYY"))}),s.length&&(s.attr("colspan",s.closest(".sui-table").find("> thead tr th").length),s.find("i").hide(),s.find("span").removeClass("sui-screen-reader-text"))},openFilterInline:function(e){var t=this.$(e.target),i=t.closest(".sui-pagination-wrap").find(".sui-button-icon"),s=t.closest(".hui-actions-bar").next(".sui-pagination-filter");i.toggleClass("sui-active"),s.toggleClass("sui-open"),e.preventDefault(),e.stopPropagation()},openFilterModal:function(e){SUI.dialogs["hustle-dialog--filter-entries"].show().on("show",function(e,t){e.getElementsByClassName("sui-dialog-content")[0].className="sui-dialog-content sui-fade-in"}),e.preventDefault()},closeFilterModal:function(e){SUI.dialogs["hustle-dialog--filter-entries"].hide(),SUI.dialogs["hustle-dialog--filter-entries"].on("hide",function(e,t){e.getElementsByClassName("sui-dialog-content")[0].className="sui-dialog-content sui-fade-out"}),e.preventDefault()},removeFilter:function(e){var t=this.$(e.target).data("filter"),i=new RegExp("&"+t+"=[^&]*","i");-1!==["order_by","search_email","date_range"].indexOf(t)&&(location.href=location.href.replace(i,""))},openDeleteModal:function(t){t.preventDefault();var i=e(t.target),s={id:i.data("id"),nonce:i.data("nonce"),action:"delete",title:i.data("title"),description:i.data("description"),actionClass:""};Module.deleteModal.open(s)},clearFilter:function(e){e.preventDefault(),this.$("input[name=search_email]").val(""),this.$("input[name=date_range]").val("")}}))}),Hustle.define("ProviderNotice.View",function(e,t,i){"use strict";new(Backbone.View.extend({el:".hustle-provider-notice",cookieKey:"",events:{"click .dismiss-provider-migration-notice":"HideProviderNotice"},initialize:function(){this.cookieKey="provider_migration_notice_",e(".hustle-provider-notice").length&&this.showProviderNotice()},HideProviderNotice:function(t){Optin.cookie.set(this.cookieKey+e(t.currentTarget).data("name"),1,7),location.reload()},showProviderNotice:function(){var t=e(".hustle-provider-notice").data("name");1!==Optin.cookie.get(this.cookieKey+t)&&e("#hustle_migration_notice__"+t).show()}}))}),Hustle.define("Settings.View",function(e,t,i){"use strict";var s="_page_hustle_settings";s===pagenow.substr(pagenow.length-s.length)&&new(Backbone.View.extend({el:".sui-wrap",events:{"click .sui-sidenav .sui-vertical-tab a":"sidenav","click .sui-pagination-wrap > button":"pagination","click #hustle-dialog-open--reset-settings":"resetDialog"},initialize:function(t){var s=Hustle.get("Settings.General_Settings"),n=Hustle.get("Settings.Dashboard_Analytics_View"),a=Hustle.get("Settings.reCaptcha_Settings"),o=Hustle.get("Settings.Accessibility_Settings"),l=Hustle.get("Settings.Permissions_View"),r=Hustle.get("Settings.Top_Metrics_View"),d=Hustle.get("Settings.Unsubscribe_View"),u=Hustle.get("Settings.Data_Settings"),c=Hustle.get("Settings.Palettes"),h=Hustle.get("Settings.Privacy_Settings");new s,new n,new a,new l,new r,new o,new d,new h,new c,new u,e(i).off("popstate",e.proxy(this.tabUpdate,this)),e(i).on("popstate",e.proxy(this.tabUpdate,this)),Hustle.Events.trigger("view.rendered",this)},sidenav:function(t){var i=e(t.target).data("tab");i&&this.tabJump(i,!0),t.preventDefault()},tabUpdate:function(e){var t=e.originalEvent.state;t&&this.tabJump(t.tabSelected)},tabJump:function(e,t){var i=this.$el.find('a[data-tab="'+e+'"]'),s=i.closest(".sui-vertical-tabs").find(".sui-vertical-tab"),n=this.$el.find(".sui-box[data-tab]"),a=this.$el.find('.sui-box[data-tab="'+e+'"]');t&&history.pushState({tabSelected:e},"Hustle Settings","admin.php?page=hustle_settings&section="+e),s.removeClass("current"),n.hide(),i.parent().addClass("current"),a.show()},pagination:function(e){var t=this.$(e.target).closest(".sui-pagination-wrap"),i=t.find(".sui-button-icon"),s=t.next(".sui-pagination-filter");i.toggleClass("sui-active"),s.toggleClass("sui-open"),e.preventDefault(),e.stopPropagation()},sidetabs:function(e){var t=this.$(e.target),i=t.parent("label"),s=t.data("tab-menu"),n=t.closest(".sui-side-tabs"),a=n.find(".sui-tabs-menu .sui-tab-item"),o=a.find("input");a.removeClass("active"),o.removeAttr("checked"),n.find(".sui-tabs-content > div").removeClass("active"),i.addClass("active"),t.attr("checked","checked"),n.find('.sui-tabs-content div[data-tab-content="'+s+'"]').length&&n.find('.sui-tabs-content div[data-tab-content="'+s+'"]').addClass("active")},resetDialog:function(t){var i=this.$(t.target),s=e("#hustle-dialog--reset-settings"),n=s.find("#dialogTitle"),a=s.find("#dialogDescription");n.text(i.data("dialog-title")),a.text(i.data("dialog-info")),SUI.dialogs["hustle-dialog--reset-settings"].show(),t.preventDefault()}}))});